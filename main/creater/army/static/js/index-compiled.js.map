{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;AAIA,CAAC,UAAS,QAAT,EAAkB;;AAGf,QAAI,MAAM,IAAI,KAAJ,EAAV;AAAA,QACI,SAAS,IADb;;AAGA,QAAI,MAAJ,GAAa,YAAY;;AAErB,YAAI,OAAO,aAAa,KAAK,KAAlB,EAAwB,KAAK,MAA7B,CAAX;AAAA,YACI,UAAU,KAAK,OADnB;AAEA,iBAAS,KAAK,MAAd;AACA,gBAAQ,SAAR,CAAkB,IAAlB,EAAuB,CAAvB,EAAyB,CAAzB;;AAEA,iBAAS;AACL,qBAAQ,OAAO,UAAP,CAAkB,IAAlB,CADH;AAEL,kBAAK,IAFA;AAGL,eAAE,EAHG;AAIL,eAAE,CAAC,EAJE;AAKL,oBAAO;AALF,SAAT;;AAQA,iBAAS;AACL,qBAAQ,OAAO,UAAP,CAAkB,IAAlB,CADH;AAEL,kBAAK,MAFA;AAGL,eAAE,GAHG;AAIL,eAAE,CAAC,CAJE;AAKL,oBAAO;AALF,SAAT;;AASA,iBAAS;AACL,qBAAQ,OAAO,UAAP,CAAkB,IAAlB,CADH;AAEL,kBAAK,GAFA;AAGL,eAAE,GAHG;AAIL,eAAE,CAAC,CAJE;AAKL,oBAAO;AALF,SAAT;;AASA,iBAAS;AACL,qBAAQ,OAAO,UAAP,CAAkB,IAAlB,CADH;AAEL,kBAAK,IAFA;AAGL,eAAE,GAHG;AAIL,eAAE,CAAC,CAJE;AAKL,oBAAO;AALF,SAAT;AAOH,KAxCD;;AA0CA,QAAI,GAAJ,GAAU,2BAAV;;AAEA,aAAS,QAAT,CAAkB,MAAlB,EAAyB;AACrB,YAAI,UAAU,OAAO,OAAP,IAAgB,EAA9B;AAAA,YACI,SAAS,OAAO,MAAP,IAAe,CAD5B;AAAA,YAEI,OAAM,OAAO,IAAP,IAAa,EAFvB;AAAA,YAGI,IAAI,OAAO,CAAP,IAAU,CAHlB;AAAA,YAII,IAAG,OAAO,CAAP,IAAW,CAJlB;;AAMA,gBAAQ,IAAR;AACA,gBAAQ,MAAR,CAAe,SAAO,KAAK,EAAZ,GAAe,GAA9B;AACA,gBAAQ,SAAR,CAAkB,CAAlB,EAAoB,CAApB,E;AACA,gBAAQ,IAAR,GAAe,SAAf;AACA,gBAAQ,QAAR,CAAiB,IAAjB,EAAsB,GAAtB,EAA0B,GAA1B;AACA,gBAAQ,OAAR;AACH;;AAED,aAAS,YAAT,CAAsB,KAAtB,EAA4B,MAA5B,EAAoC;AACjC,YAAI,SAAS,SAAS,aAAT,CAAuB,QAAvB,CAAb;AACC,eAAO,KAAP,GAAe,KAAf;AACA,eAAO,MAAP,GAAgB,MAAhB;AACA,YAAI,UAAU,OAAO,UAAP,CAAkB,IAAlB,CAAd;;AAEA,eAAO,EAAC,QAAO,MAAR,EAAe,SAAQ,OAAvB,EAAP;AACH;;AAGD,MAAE,SAAF,EAAa,EAAb,CAAgB,OAAhB,EAAwB,YAAY;;;;;;;;;;;;;;;AAmBhC,YAAG,CAAC,MAAJ,EAAW;AACP;AACH;;AAED,iBAAS;AACN,qBAAQ,OAAO,UAAP,CAAkB,IAAlB,CADF;AAEL,kBAAK,EAAE,UAAF,EAAc,GAAd,EAFA;AAGL,eAAE,EAHG;AAIL,eAAE,CAAC,EAJE;AAKL,oBAAO;AALF,SAAT;;;;;;;;;;;;;;AAsBA,UAAE,IAAF,CAAO;AACH,kBAAK,MADF;AAEH,iBAAI,wDAFD;AAGH,kBAAK;AACD,oBAAG,GADF;AAED,qBAAI,OAAO,SAAP,EAFH;AAGD,sBAAK;AAHJ,aAHF;AAQH,mBARG,mBAQK,IARL,EAQU;AACT,wBAAQ,GAAR,CAAY,wBAAsB,IAAlC;AACH;AAVE,SAAP;AAYH,KAzDD;AA4DH,CAvIA,CAuIC,QAvID,CAAD","file":"index-compiled.js","sourcesContent":["/**\r\n created by fly on 2016/7/21\r\n */\r\n\r\n!function(document){\r\n\r\n\r\n    var img = new Image(),\r\n        canvas = null;\r\n\r\n    img.onload = function () {\r\n\r\n        var data = createCanvas(this.width,this.height),\r\n            context = data.context;\r\n        canvas = data.canvas;\r\n        context.drawImage(this,0,0);\r\n\r\n        fillText({\r\n            context:canvas.getContext('2d'),\r\n            text:'徐畅',\r\n            x:98,\r\n            y:-25,\r\n            rotate:10\r\n        });\r\n\r\n        fillText({\r\n            context:canvas.getContext('2d'),\r\n            text:'2016',\r\n            x:198,\r\n            y:-5,\r\n            rotate:10\r\n        });\r\n\r\n\r\n        fillText({\r\n            context:canvas.getContext('2d'),\r\n            text:'7',\r\n            x:258,\r\n            y:-8,\r\n            rotate:10\r\n        });\r\n\r\n\r\n        fillText({\r\n            context:canvas.getContext('2d'),\r\n            text:'23',\r\n            x:292,\r\n            y:-8,\r\n            rotate:10\r\n        });\r\n    };\r\n\r\n    img.src = './static/images/army1.jpg';\r\n\r\n    function fillText(option){\r\n        var context = option.context||{},\r\n            rotate = option.rotate||0,\r\n            text= option.text||'',\r\n            x = option.x||0,\r\n            y =option.y ||0;\r\n\r\n        context.save();\r\n        context.rotate(rotate*Math.PI/180);\r\n        context.translate(x,y);//28 -55\r\n        context.font = \"16px 宋体\";\r\n        context.fillText(text,320,150);\r\n        context.restore();\r\n    }\r\n\r\n    function createCanvas(width,height) {\r\n       var canvas = document.createElement('canvas');\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        var context = canvas.getContext('2d');\r\n        //document.getElementById('fly-main').appendChild(canvas);\r\n        return {canvas:canvas,context:context};\r\n    }\r\n\r\n\r\n    $('#create').on('click',function () {\r\n\r\n      /*  var formData = new FormData();\r\n\r\n        formData.append('file', document.getElementById('file').files[0]);\r\n\r\n        $.ajax({\r\n            type:\"POST\",\r\n            url:'http://localhost:90/thinkphp/Index/Index/upload',\r\n            data:formData,\r\n            contentType: false,\r\n            processData: false,\r\n            success(data){\r\n                console.log('http://localhost:90'+data);\r\n            }\r\n        });\r\n\r\n\r\n        return;*/\r\n        if(!canvas){\r\n            return;\r\n        };\r\n\r\n        fillText({\r\n           context:canvas.getContext('2d'),\r\n            text:$('.company').val(),\r\n            x:28,\r\n            y:-55,\r\n            rotate:10\r\n        });\r\n\r\n      /*  fillText({\r\n            context:canvas.getContext('2d'),\r\n            text:$('.name').val(),\r\n            x:28,\r\n            y:-55,\r\n            rotate:10\r\n        });*/\r\n\r\n\r\n\r\n//        alert(1);\r\n\r\n        //document.write(canvas.toDataURL());\r\n\r\n        $.ajax({\r\n            type:\"POST\",\r\n            url:'http://localhost:90/thinkphp/Index/Index/base64ToImage',\r\n            data:{\r\n                id:123,\r\n                img:canvas.toDataURL(),\r\n                name:'fly'\r\n            },\r\n            success(data){\r\n                console.log('http://localhost:90'+data);\r\n            }\r\n        });\r\n    });\r\n\r\n\r\n}(document);"]}