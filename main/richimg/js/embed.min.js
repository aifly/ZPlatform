(function(){window.tlRequire=window.tlRequire||{};var g=window.tlRequire;var e=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;var f=/([^\s,]+)/g;function h(a){var b=a.toString().replace(e,"");var c=b.slice(b.indexOf("(")+1,b.indexOf(")")).match(f);return c||[]}(function(b){var n={};var d=function(i){return{waitList:[],waitCount:0,callback:null,definition:null,dependencies:null,async:null,id:i}};var m=function(j,k,i){o(j,k,i,true)};var o=function(j,u,i,v){v=v||false;n[j]=n[j]||d(j);var k=n[j];k.callback=i;k.dependencies=u;k.async=v;for(var w=0;w<u.length;w++){var x=u[w];if(!n[x]){n[x]=d(x)}var l=n[x];if(!l.definition){l.waitList.push(k);k.waitCount++}}if(k.callback&&k.waitCount===0){p(k)}};var c=function(j){var l=h(j),s=[];for(var t=0;t<l.length;t++){var i=l[t];var k=n[i];a(k);p(k);s.push(k.definition)}return function(){j.apply(undefined,s)}};var a=function(j){for(var i=0;i<j.waitList.length;i++){var k=j.waitList[i];k.waitCount--;if(k.callback&&k.waitCount===0){p(k)}}};var p=function(k){var i=[];for(var l=0;l<k.dependencies.length;l++){var r=k.dependencies[l];var j=n[r];i.push(j.definition)}if(k.async){i.push(function(q,t){if(q){k.definition=t;a(k)}});k.callback.apply(undefined,i)}else{k.definition=k.callback.apply(undefined,i);a(k)}};b.define=o;b.defineAsync=m;b.inject=c}(g))}());tlRequire.define("EventDispatcher",[],function(){var b=function(){this._listeners={}};b.prototype={constructor:b,addListener:function(a,d){if(!this._listeners[a]){this._listeners[a]=[]}this._listeners[a].push(d)},trigger:function(i,g){var j=this._listeners[i],h;if(j){h=j.slice(0);var a;for(a=0;a<h.length;a++){h[a].call(this,g)}}},removeListener:function(g,f){var h=this._listeners[g];if(h){var a;for(a=0;a<h.length;a++){if(h[a]===f){h.splice(a,1);break}}}}};return b});tlRequire.define("abTest",["hashing"],function(t){var n={};function q(){var b=0;try{b=localStorage.getItem("tlJsUserId");if(!b){b=Math.floor(Math.random()*100);localStorage.setItem("tlJsUserId",b)}}catch(a){}return b}var m=function(c,e,d,a){var b={start:e,end:d,variant:a};if(!n.hasOwnProperty(c)){n[c]=[]}n[c].push(b)};var l=function(c,a){var e=n[c];var b;if(typeof e==="undefined"){return null}for(b=0;b<e.length;b++){var d=e[b];if((d.start<=a)&&(d.end>=a)){return d.variant}}return null};var p=function(c,a){var b=Math.abs(a^t.adler32(c))%100;return l(c,b)};var k=function(a){return p(a,q())};var s=function(a){var c=[];var b;for(b in n){if(n.hasOwnProperty(b)){var d=p(b,a);c.push({testName:b,variant:d})}}return c};var r=function(){return s(q())};var o=function(){n={}};return{addBucket:m,variantForUser:k,activeTestsForUser:r,clear:o,internals:{variantForUserId:p,activeTestsForUserId:s,variantForUserBucketPoint:l}}});tlRequire.define("actionLogger",["jQuery","config","eventCallback","util","abTest"],function(A,v,B,M,F){var E={};var K={};var u={};var D={};var H=M.isTouchDevice;var J=(function(){var a=null;var c=null;function b(f,e){var d=true;var g=new Date().getTime();if(c&&!e){if(g-c<5000){d=false}}if(v.referer){f.referer=v.referer}if(d){if(a){clearTimeout(a);a=null}a=setTimeout(function(){A.getJSON(v.getApiBaseUrl()+"/api/internal/logActivity?callback=?",f)},200);if(!e){c=g}}}return b}());function y(e,a){var c=a[e];var d=new Date().getTime();var b=(c&&(d-c<5000))?false:true;return b}function N(c,e,f,h){var d=y(c,K);if(!d){return}var b={event:"tagClick",scene:e,tag:c};B(f,b);var a=v.getApiBaseUrl();var g={thing:c,sceneId:e,e:"click",referer:v.referer};A.getJSON(a+"/api/internal/logThingAccess?callback=?",g,h);K[c]=new Date().getTime()}function x(b,a){if(H&&!D[b]){D[b]=true;return true}return a}function I(a,c,f){var b=y(a,E);if(!b){return}u[a]=new Date();var e=v.getApiBaseUrl();var d=x(c);setTimeout(function(){A.getJSON(e+"/api/internal/logThingAccess?callback=?",{thing:a,sceneId:c,e:"hover",referer:v.referer,dwell:d});var g={event:"tagHover",scene:c,tag:a};B(f,g)},500);E[a]=new Date().getTime()}var C=function(b){var a=b.data("entertime");if(a){var e=(new Date()).getTime()-a;if(e>250){var c=b.find("img").attr("tl-scene-id");var d=x(c);if(c){setTimeout(function(){A.getJSON(v.getApiBaseUrl()+"/api/internal/logSceneAccess?callback=?",{time:e,sceneId:c,referer:v.referer,dwell:d,event:"scene.hover"})},500)}b.removeData("entertime")}}};var L=function(a,b){var c=a.trackingUrl;if(c){c=c.replace("RANDOM",Math.floor(Math.random()*1000000000));c=c.replace("[timestamp]",new Date().getTime());b.find("img.tlTracker").remove();b.append('<img class="tlTracker" src="'+c+'" style="position:absolute;width:1px;height:1px;top:0;left:0;">')}};var w=function(d){var b=d.width();var e=Math.floor(b/100)*100;var m=Math.floor(d.height()/100)*100;var g=Math.floor(window.screen.width/100)*100;var f=Math.floor(window.screen.height/100)*100;var l=/iPad/.test(navigator.platform);var h=/iPhone/.test(navigator.platform);var c=l?"iPad":h?"iPhone":"unknown";var k=F.activeTestsForUser();var j=null;var i=navigator.userAgent.toLowerCase();if(i.indexOf("msie")!==-1){j="IE"+(parseInt(i.split("msie")[1]).toString())}k.push({testName:"r_imageWidth",variant:b.toString()});k.push({testName:"r_imageHeight",variant:d.height().toString()});k.push({testName:"r_imageWidthHundred",variant:e.toString()});k.push({testName:"r_imageHeightHundred",variant:m.toString()});k.push({testName:"r_screenWidth",variant:window.screen.width.toString()});k.push({testName:"r_screenHeight",variant:window.screen.height.toString()});k.push({testName:"r_screenWidthHundred",variant:g.toString()});k.push({testName:"r_screenHeightHundred",variant:f.toString()});k.push({testName:"r_mobileDevice",variant:c});k.push({testName:"r_ieVersion",variant:j});var a=JSON.stringify(k);return a};var z=function(b){var c=b.find("img.thinglinkImage");var d=c.attr("tl-scene-id");if(d){var a=c.tlImage("sceneData");L(a,b);setTimeout(function(){A.getJSON(v.getApiBaseUrl()+"/api/internal/logSceneAccess?callback=?",{sceneId:d,referer:v.referer,event:"scene.view",channelId:M.getChannelId(b)})},500)}};var G=function(c,d){var b=u[c];if(b){var a=(new Date()).getTime()-b;if(a>250){if(d){setTimeout(function(){A.getJSON(v.getApiBaseUrl()+"/api/internal/logThingAccess?callback=?",{time:a,sceneId:d,thing:c,e:"hoverend",referer:v.referer})},500)}u[c]=null}}};return{calcABTestString:w,logActivity:J,logHoverTime:C,logHoverEnd:G,logClick:N,logHover:I,logSceneView:z,installTracker:L}});tlRequire.define("adMatcher",[],function(){function c(){var a=["1.\\d+.\\d+.\\d+","127.0.0.\\d+","localhost","46.45.138.126","abs.twimg.com","ad.doubleclick.net","ad.flatmaids.de","ad.zanox.com","ad.adriver.ru","ad.admitad.com","ad.dumedia.ru","ad.linksynergy.com","ad-cdn.technoratimedia.com","ad\\d.adfarm1.adition.com","ad1.emediate.dk","ad.retargeter.com","adsfac.eu","adfarm.mediaplex.com","adfile.tattermedia.com","admax.quisma.com","admeta.vo.llnwd.net","adscale.nuggad.net","adserver.wesee.com","ads.foodbuzz.com","ads.giovannicintolo.com","ads.guava-affiliate.com","ads.heias.com","ads.jetpackdigital.com","ads.nelly.com","ads.newtentionassets.net","ads.studentmedia.ucla.edu","ads.thinglink.com","ads.jetpackdigital.com","adtag.neodatagroup.com","adtracker.meinungsstudie.de","aka-cdn-ns.adtech.de","ads\\d.unitymedia.de","analytics.sanoma.fi","analytics.spongecell.com","api.zanox.ws","api.here.com","ariel1.spaceprogram.com","asn.advolution.de","as.aug.me","avatars.scribblelive.com","b.aol.com","b.kavanga.ru","b.thebestlinks.com","b.scorecardresearch.com","bid.openx.net","brandnamic.adclear.net","brightcove.vo.llnwd.net","bs.serving-sys.com","cas.criteo.com","cepep.co","cdn.flashtalking.com","c.statcounter.com","counters.gigya.com","cdn\\d*.gigya.com","counter.rambler.ru","creatives.klikki.com","cxpfy.com","d.shareaholic.com","delatv.com","d1.openx.org","delivery.ctasnet.com","engine.adzerk.net","fapp.im","fraction8.com","geo.yahoo.com","getpocket.com","g.doubleclick.net","gravatar.com","\\w+.gmads.mookie1.com","hits.e.cl","i-cdn.servedbyopenx.com","imp\\w?\\w?.tradedoubler.com","imagesrv.adition.com","img-cdn.mediaplex.com","pictela.net","jptracking.elasticbeanstalk.com","\\w+.googleapis.com","khm\\d.google.com","l.betrad.com","\\w+.lijit.com","links.es","leerya.net","\\d+.maps.nlp.nokia.com","mdsad.com","mt\\d.googleapis.com","malvin.tv","maps.googleapis.com","next.playad.se","notici.me","notifreak.com","networkanalytics.net","oas.theblondesalad.com","otile\\d.mqcdn.com","pagead\\d.googlesyndication.com","paypal.com","peliculasid.biz","pictela.net","pixel.wp.com","pulsemaps.com","readitlaterlist.com","remnant.fmpub.net","reports.wizebar.com","s0.2mdn.net","s\\d+.adform.net","s\\d+.addthis.com","s\\d+.shinystat.com","stats.wordpress.com","sitemeter.com","sm\\d+.sitemeter.com","tag.admeld.com","t.qservz.com","t.socialgrowthtechnologies.com","tags.bluekai.com","tessera\\d+.intellicast.com","tile.openstreetmap.org","\\w+.tile.openstreetmap.org","track.adform.net","track.admaxim.com","tracking.hubspot.com","traffic.shareaholic.com","trk.lqw.me","trk-\\w+.tidaltv.com","us-ads.openx.net","view.adtraxx.de","videosomg.com","widgets.kiosked.com","w.uptolike.com","www.ftjcfx.com","www.getfreebacklinks.com","www.google.com","www.w3counter.com","www\\d+.a8.net","www.divxatope.com","www.etracker.de","www.callefina.com","www.googleadservices.com","www.google-analytics.com"];return new RegExp("//("+a.join("|").replace(".","\\.")+")")}var d=c();return d});tlRequire.define("animUtil",["jQuery"],function(c){function d(b,h,g,a){if(a===undefined){a="easeOutCubic"}if(g===undefined){g=100}if((h.length>30)||typeof(document.addEventListener)==="undefined"){if(b==="show"){h.show()}else{h.hide()}}else{h.stop(true,true);if(b==="show"){h.fadeIn(g,a)}else{h.fadeOut(g,a)}}}return{variateOpacity:d}});tlRequire.define("browserFeats",["jQuery"],function(d){var c=(function(){var b=null;var a=null;var h=function(f){var e=false;f(function(g){e=true});return e};var j=function(){if(b===null){b=h(function(g){var e=d("html"),f=e[0];e.bind("DOMAttrModified",g);f.setAttribute("___test___",true);f.removeAttribute("___test___");e.unbind("DOMAttrModified")})}return b};var i=function(){if(a===null){a=h(function(f){var e=d("html");e.bind("DOMNodeInserted",f);d("<span />").appendTo(d("body")).remove();e.unbind("DOMNodeInserted")})}return a};return{hasDomAttrModified:j,hasDomNodeInserted:i}}());return c});tlRequire.define("bubbleRenderer",["jQuery","config","util","cssUtil","postMessageManager","customization"],function(n,u,r,m,p,s){function t(e,c,d){var b;if(c.indexOf("<")!==-1){b=n("<p>"+c+"</p>").text().length}else{b=c.length}var a=0;if(b<50){a=100+b}else{a=100+(b/2.5);if(a>350){a=350}if(b>300){e.addClass("tlLongDescription")}else{if(b>100){e.addClass("tlSemiLongDescription")}}}var f=m.parseCssText(e.attr("style"),false,false);if(d<a){a=d}f["min-width"]=a+"px";e.css({cssText:r.mapToCssText(f,true)})}function v(a){return a.charAt(0).toUpperCase()+a.slice(1)}function o(a){var b=new RegExp("^[\u0000-\u001F\\s]*[\u0600-\u06FF\u0750-\u077F\uFB50-\uFDFF\uFE70-\uFEFF]");return !!a&&a.match(b)}function l(e,a,i,b){var f=new RegExp("([^.]+\\.(?:co\\.)?[a-z]{2,7})$"),d,g,h=(i&&i.openlink)||"AUTO";try{d=f.exec(window.location.hostname)[0]}catch(c){d=window.location.hostname}if(h==="NEW"){g=false}else{if(h==="SAME"){g=true}else{if(h==="NONE"){if(a){a()}return}else{g=new RegExp("(^https?://(?:[^/]*)|&url=http[^&]+)"+d).test(e)||(e.indexOf("://")===-1)}}}if(g&&b){if(!a){window.location.assign(e)}else{a(function(){window.location.assign(e)})}}else{if(a){a()}window.open(e)}}function q(k,e,af){var j;var a;var aj;var b,g;var h;var V;var T=k.thingUrl||"";var ab="tl-a-"+k.id;var X=n(window).width()-30;var i=n(window).height()-60;var R=X-15;var ad=i-14;if(k.productName.indexOf("\n")!==-1){k.productName=k.productName.replace(/\n\n+/g,"\n\n").replace(/\n/g,"<br>")}var Z=o(k.productName)?"tlRtl":"";if(k.theme==="iframe"){var Q=k.iWidth;var Y=k.iHeight;aj=p.prepareAndGetParameters(k.contentUrl);a=aj.srcPmParams;j=aj.rtid;var d='<iframe class="tlIframe" allowTransparency="true" name="rmt-'+k.id+'" scrolling="auto" src="'+k.contentUrl+a+'" style="width:'+Q+"px !important; height:"+Y+"px !important;max-width: "+R+"px!important; max-height:"+ad+'px!important;" frameBorder="0"></iframe>';var S;if(k.productName!=null&&k.productName.length>0){S='<div class="tlIframeDescription '+Z+'">';S+=k.productName;S+="</div><hr>"}else{S=""}h=n('<div class="tlThingText" id="'+ab+'" style="max-width:'+X+"px!important; max-height:"+i+'px!important;"><div class="tlThingClose"></div><div class="tlThingContent" style="max-width:'+X+"px!important; max-height:"+i+'px!important;">'+S+'<div class="tlSpinner" style="width:'+Q+"px!important;height:"+Y+'px!important;"></div></div><div class="tlArrowWrapper"><div class="tlArrow"></div></div></div>');g=function(){var w=h.find(".tlThingContent > .tlSpinner");var x=w.find(".tlIframe");if(x.size()===0){x=n(d);x.css("opacity","0");var y=Q<=R?Q:R;if(w.length===0){h.find(".tlThingContent").append(x)}else{if(w.is("div")){w.append(x)}}h.find(".tlThingContent").css("cssText","width:"+y+"px!important;");x.load(function(){h.addClass("iframeLoaded");x.addClass("loaded");w.css({width:x.css("width"),height:x.css("height")});var z=k.styles;if(!k.styles){z=n("."+ab).data("tlStyles")||{}}s.applyNewStyles(h,z,r.getSourceDomain(k.contentUrl));setTimeout(function(){x.fadeTo(300,1)},300);x.unbind("load")});if(window.ActiveXObject||"ActiveXObject" in window){x.attr("src",x.attr("src"))}}};b=function(y,w,x){l(y,x,k,window.top==window.self)}}else{if(k.theme==="rich"){var ah=!r.no(k.icon)?k.icon:"";var W=!r.no(k.title)?k.title:"";if(k.productName){W=k.productName}else{if(!r.no(k.title)){W=k.title}else{W=""}}W='<span class="tlThingTitle">'+W+"</span>";if(!k.productName&&!r.no(k.subTitle)){W='<span class="tlThingSubTitle">'+k.subTitle+"</span><br />"+W}var ag="";var f;if(ah){f='<div class="tlVideoIconWrapper"><img class="tlThingIcon" src="'+ah+'"/></div>'}else{f='<div class="tlThingIcon"></div>'}var ac="";if(!r.no(k.site)){ac=k.site;if(!r.no(k.siteUrl)){ac='<a href="'+k.siteUrl+'">'+ac+"</a>"}ac='<div class="tlThingFooter">'+ac+"</div>"}var ai="";if("NONE"===k.openlink){ai="defaultCursor"}h=n('<div class="tlThingText" id="'+ab+'"><div class="tlThingClose"></div><div class="tlThingContent" style="max-width:'+X+"px!important; max-height:"+i+'px!important">'+ag+'<div class="tlNonplayingContent '+Z+'"style="max-width:'+X+"px!important; max-height:"+i+'px!important;"><div class="tlThumbnail '+ai+'"style="important;max-width:'+X+"px!important; max-height:"+i+'px!important;">'+f+'<div class="tlThumbnailOverlay"></div></div><span class="tlCenteringOuter"><span class="tlCenteringMiddle"><span class="tlCenteringInner '+Z+'">'+W+"</span></span></span></div>"+ac+'</div><div class="tlArrowWrapper"><div class="tlArrow"></div></div></div>');if(k.contentUrl){aj=p.prepareAndGetParameters(k.contentUrl);a=aj.srcPmParams;j=aj.rtid}b=function(C,w,x){if(x){x()}if(h.hasClass("whitelabel")&&(k.openlink==="AUTO"||k.openlink==="NONE")){return}if(k.contentUrl&&h.find(".tlSpinner").length===0){n(".tlThingClose").not(h.find(".tlThingClose")).mouseup();var B=n(window).width();var D=k.iWidth;var y=k.iHeight;if(D>(B-26)){var z=D/(B-26);D=D/z;y=y/z}var A=n('<iframe class="tlSpinner tlRichIframe" webkitallowfullscreen mozallowfullscreen allowfullscreen scrolling="auto" src="'+k.contentUrl+a+'" style="width:'+D.toString()+"px !important; height:"+y.toString()+'px !important;" frameBorder="0"></iframe>');h.find(".tlThingContent").append(A);h.addClass("tlPlaying tlSticky");af(w);setTimeout(function(){w.closest(".tlImageContainer").addClass("mouseover")},0)}else{h.find(".tlThingClose").mouseup();if(C.indexOf("http")===0){l(C,false,k,window.top==window.self)}else{window.location=C}}}}else{var aa=!r.no(k.title)?k.title:"";var c="";if(aa!==""){if(k.productName!==""){c+="<br />"}c+='<a class="tlThingLink" href="'+T+'">'+aa+"</a>"}V=k.productName;h=n('<div class="tlThingText" id="'+ab+'" style="max-width:'+X+"px!important;max-height:"+i+'px!important;""><div class="tlThingClose"></div><div class="tlThingContent '+Z+'" style="max-width:'+X+"px!important; max-height:"+i+'px!important;">'+V+c+'</div><div class="tlArrowWrapper"><div class="tlArrow"></div></div></div>');b=function(y,w,x){l(y,x,k,window.top==window.self)};t(h,V,X)}}var U="";if(!r.no(k.theme)){U+=" tlTheme"+v(k.theme)+"Thing"}if(!r.no(k.variant)){U+=" tlVariant"+v(k.variant)+"Thing";if(k.variant=="image"&&e&&T.indexOf(u.getBaseUrl()+"/scene/")!=-1){U+=" whitelabel"}}h.addClass(U);var ae={rtid:j,clickHandler:b,hoverHandler:g};h.data("bubbledata",ae);return h}return{render:q,setBubbleTagTextStyle:t,relocateOrOpen:l}});tlRequire.define("callbackManager",[],function(){var b=(function(){var a={};return{runAfter:function(f,e){if(a[f]&&a[f].length===0){e()}else{if(!a[f]){a[f]=[e]}else{a[f].push(e)}}},triggerEvent:function(d){if(a[d]){while(a[d].length>0){(a[d].shift())()}}else{a[d]=[]}}}}());return b});tlRequire.define("config",["namespace","util"],function(t,s){function p(){var c="http://thinglink.local:8080/thinglink",b="https://thinglink.local:8443/thinglink",d="https://localhost:8000",a="https://localhost:8000";if(v.address.charAt(0)=="@"){v.address=c;v.clientId="666666666"}if(v.videoAddress.charAt(0)=="@"){v.videoAddress=d}if(v.sslVideoAddress.charAt(0)=="@"){v.sslVideoAddress=a}if(v.sslAddress.charAt(0)=="@"){v.sslAddress=b}if(v.embedAddress.charAt(0)=="@"){v.embedAddress=c}if(v.staticAddress.charAt(0)=="@"){v.staticAddress=c}if(v.staticSslAddress.charAt(0)=="@"){v.staticSslAddress=b}if(v.staticAddress.charAt(0)=="/"){v.staticAddress=s.getProtocol()+v.staticAddress}if(v.cssNonce.toString().charAt(0)=="@"){v.cssNonce=Math.round(Math.random()*Math.pow(10,8))}}var v=s.extend({address:"http://www.zmiti.com",sslAddress:"https://www.zmiti.com",videoAddress:"https://video.zmiti.com",sslVideoAddress:"https://video.zmiti.com",staticAddress:"//cdn.zmiti.me",staticSslAddress:"https://cdn.zmiti.me",embedAddress:"//cdn.zmiti.me",cssNonce:"334114934665",clientId:"310115790974091265",fbAppId:"163019823751039",wlFbAppId:"448074751917449",usePromotionBanner:false,minWidth:130,minHeight:130,activateImage:function(a){$tlJQ(a).tlImage("scrollTo")},initAfterLoad:true,showPoweredBy:true,eventManager:false,disableContextMenu:false,fourDotsInfo:true,vOverflow:null,hOverflow:null,referer:undefined,nubbinSneakPeek:true,makeNubbinsSticky:false,makeSidebarSticky:false,extraSidebarIcons:[],preventNavigation:false,disableMenuItems:false,forceSecure:false,initialNubbinShowDuration:5000,eventCallback:null,language:null,manualViewStats:false,highlightCallback:null},t.config);p();if(window.location.search.indexOf("thinglinkLocal")!==-1){var l="www.thinglink.com";v.address="http://"+l;v.sslAddress="https://"+l}function r(){return("https:"==document.location.protocol)?v.sslAddress:v.address}function n(){return v.sslAddress}function m(){return("https:"==document.location.protocol)?v.sslVideoAddress:v.videoAddress}function q(){return("https:"==document.location.protocol)?v.staticSslAddress:v.staticAddress}function o(){var b=r();if(window.top!==window){return false}var a=window.location.href;return a.indexOf(b)!=-1}function u(a){if(!v.language&&a){v.language=a}}v.getCDNUrl=q;v.getBaseUrl=r;v.getApiBaseUrl=n;v.getBaseVideoUrl=m;v.isThinglinkSite=o;v.setRequestLanguage=u;t.config=v;return v});tlRequire.define("cssInjector",["jQuery","config"],function(h,f){function e(a,d,c){var b="";if(c){b=' media="screen"'}if(h("head").has("#"+a).length===0){var j=h('<link id="'+a+'" type="text/css" rel="stylesheet" href="'+d+'"'+b+"></link>").appendTo(h("head"));if(typeof(document.addEventListener)==="undefined"){j.attr({href:d,rel:"stylesheet",type:"text/css",id:a})}}}function g(){if(!document.getElementById("tlInjectedCss")){e("tlInjectedCss",f.getCDNUrl()+"/jsec/"+f.cssNonce+"/embed.css");if(typeof(document.addEventListener)==="undefined"){e("tlInjectedIeCss",f.getCDNUrl()+"/jsec/"+f.cssNonce+"/embed-ie.css")}}}return{injectEmbedCSS:g,addExternalCss:e}});tlRequire.define("cssUtil",["jQuery","util"],function(g,f){function h(q,i,m){var t={};if(!q){return t}var r=q.split(";"),c,a,b,d,s;for(c=0;c<r.length&&(r[c]!==false);c++){d=r[c].match(/^ *([^: ]+) *: *(.*)$/);if(d){a=d[1];if(i){s=d[2].match(/^([\d.]+) *(?:px *(?:! *important)? *)?$/i);if(s){b=s[1]}}if((i&&!s)||!i){b=g.trim(d[2]);if(i||m){b=b.replace(/! *important/i,"")}}a=a.toLowerCase();t[a]=b}}return t}function e(a,b){var c=h(b.style.cssText,false,true);c.top=a.t+"px";c.left=a.l+"px";c.width=a.w+"px";c.height=a.h+"px";b.style.cssText=f.mapToCssText(c,true)}return{parseCssText:h,repositionElement:e}});tlRequire.define("customization",["namespace","util","config","jQuery"],function(u,r,v,n){if(!window.location.origin){window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function p(){return{bubble:{backgroundColor:"inherit",foregroundColor:"inherit"},font:{size:"inherit",family:"inherit",source:"default"}}}function m(a){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var b=parseFloat(RegExp.$1);if(b<=9){a=JSON.stringify(a)}}return a}function o(c,a,b){if(typeof b==="undefined"||b=="undefined"){b=window.location.origin}else{b=decodeURIComponent(b)}if(c.length>0&&c.hasClass("loaded")){try{a=m(a);c[0].contentWindow.postMessage(a,b)}catch(d){console.log("failed to send styles")}}}function l(b){var c=u.customization.googleFonts||[],a;for(a=c.length-1;a>=0;a--){if(c[a]===b){return true}}return false}function q(b,e){var f;if(document.getElementById("webfontScript")==null){f=document.createElement("script");var d=document.scripts[0];f.id="webfontScript";f.src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js";d.parentNode.insertBefore(f,d)}else{f=document.getElementById("webfontScript")}function c(){WebFont.load({google:{families:[b+":400,400i,700,700i"]}})}if(n(f).hasClass("script-loaded")){var a=b.toLowerCase().replace(/ /g,"");if(!n("html").hasClass("wf-"+a+"-n4-loading")&&!n("html").hasClass("wf-"+a+"-n4-active")){c()}}else{f.onload=function(){n(this).addClass("script-loaded");c()}}}function t(g,f,a){if(typeof(window.addEventListener)==="undefined"){return}var c={};var d={};f=r.extend(p(),f);if(f.bubble){if(f.bubble.backgroundColor!="inherit"){c["background-color"]=f.bubble.backgroundColor}else{c["background-color"]="#ffffff"}if(f.bubble.foregroundColor!="inherit"){c.color=f.bubble.foregroundColor;d.color=f.bubble.foregroundColor}else{c.color="#000000";d.color="#000000"}}if(f.font){if(f.font.size!="inherit"){c["font-size"]=f.font.size+"px";d["font-size"]=f.font.size+"px"}else{c["font-size"]="";d["font-size"]=""}if(f.font.family!="inherit"){if(f.font.source==="google"||(typeof(f.font.source)==="undefined"&&l(f.font.family))){q(f.font.family,g)}c["font-family"]=f.font.family+", sans-serif";d["font-family"]=f.font.family+", sans-serif"}else{c["font-family"]="inherit";d["font-family"]="inherit"}}var b=g.find(".tlUpArrow");if(b.length>0){b.css("cssText",b[0].style.cssText+" border-bottom-color: "+c["background-color"]+" !important;")}var e=g.find(".tlArrow");if(e.length>0){e.css("cssText",e[0].style.cssText+" border-top-color: "+c["background-color"]+" !important;")}g.find(".tlThingContent, .tlIframeDescription").css(c);g.find(".tlThingContent span").attr("style",r.mapToCssText(d,false));g.find(".tlThingContent, .tlIframeDescription").find("h3").css({color:"inherit"});g.find(".tlThingContent, .tlIframeDescription").find("b, i, strong, i a, b a, strong a, p").css({"font-size":"inherit",color:"inherit"});o(g.find("iframe"),f,a)}var s=r.extend({defaultCustomStyles:p,applyNewStyles:t,sendStylesToIframe:o},u.customization);u.customization=s;return u.customization});tlRequire.define("editor",["jQuery","namespace","sceneUtil","EventDispatcher","config","util","postMessageManager"],function(o,v,u,x,w,t,p){function A(b){if(o("#thinglinkColorbox").length===0){o.thinglinkColorbox.init()}var d=o(window).width();var a=o(window).height();var g=d*0.9;var e=a*0.9;var c=o.thinglinkColorbox({iframe:true,open:false,transition:"none",width:g,height:e,opacity:0.6,overlayClose:false,scrolling:false,onOpen:function(){o("html").css({overflow:"hidden"})},onComplete:function(){var i=o("#thinglinkColorbox").offset().top,j=(o(window).height()-e)/2,h=o(window).scrollTop();if(i>o(window).height()+o(window).scrollTop()){o("#thinglinkColorbox").css({top:h+j})}},onCleanup:function(){o("html").css({overflow:""});B.trigger("editorClose",b)},href:function(){return q(b)}});var f=o("#thinglinkCBLoadedContent iframe");if(typeof(window.InstallTrigger)!=="undefined"){f.css("display","block")}f.load(function(){f.css("background-color","transparent");f.css("height",e+"px")})}function q(c){var d=u.getSceneUrl(c),h=w.getApiBaseUrl(),f=c.attr("tl-type");if(f=="video"){var i=c.attr("tl-video-id");return w.getBaseVideoUrl()+"/videos/"+i+"/editor"}var g=c.attr("tl-scene-id");if(!g){g="url="+d;if(!t.no(window.__tlid)){g+="&massId="+window.__tlid}}else{g="itemId="+g}var a=p.prepareAndGetParameters(h+"/embed/editor").srcPmParams;var b;if(w.isThinglinkSite()){b="thinglink_site"}else{b="embedded_image"}var e=Math.floor(Math.random()*10000000);return h+"/embed/editor?x="+e+"&embed=true&"+g+"&activityOrigin="+b+a}function r(a,c){var d=q(a);if(c){v.editorPopup=c;c.location.href=d}else{var e=screen.width;var h=screen.height;var f=e*0.8;var i=h*0.8;var b=(e/2)-(f/2);var g=(h/2)-(i/2);v.editorPopup=window.open(d,"editor","status=0,statusbar=0,toolbar=0,location=0,menubar=0,directories=0,resizable=1,height="+i+",width="+f+",left="+b+",top="+g)}}function y(a,b){if(b){try{b.close()}catch(c){}}if(o("#thinglinkColorBoxScript").length===0){o.getScript(w.getCDNUrl()+"/jsec/"+w.cssNonce+"/jquery.colorbox.js",function(){if(a){a()}});v.addExternalCss("tlInjectedColorboxCss",w.getCDNUrl()+"/jsec/"+w.cssNonce+"/colorbox.css",true)}else{if(a){a()}}}function z(d,a,b,c){u.closeAllStickyTags();if(u.isThinglinkSceneView()&&!a){a=function(){window.location.reload()}}v.editorCloseCallback=a;if(!c&&(window.innerWidth<1025||window.innerHeight<585)){r(o(d),b)}else{if(b){try{b.close()}catch(e){}}y(function(){A(o(d))},b)}}var s=function(){};s.prototype=new x();s.prototype.open=z;var B=new s();return B});tlRequire.define("errorReporter",["namespace","config","jQuery"],function(j,k,i){var h=5;var l=0;var g=window.onerror;window.onerror=function(b,d,e){if(d.indexOf("embed.js")===-1){return}if(g){g(b,d,e)}l+=1;if(l>=h){return}var c=k.getApiBaseUrl();var a={errorMessage:b,file:d,lineNumber:e};i.ajax({url:c+"/api/internal/reportJsError",data:a,dataType:"jsonp"})};return{}});tlRequire.define("eventCallback",["config"],function(d){function c(b,a){var h;if(b.length>0){h=b.tlImage("sceneData");var g=h.permissions;if(d.eventCallback&&typeof(g)!="undefined"&&g.indexOf("cpm")>=0){a.image=b[0];a.timestamp=(new Date()).getTime();d.eventCallback(a)}}}return c});tlRequire.define("eventDebounce",[],function(){var b=function(i){var j,k=[],h={},a=function(c){if(i.after){i.after.call(c,k,h)}k=[];j=null;h={}};return function l(c){var d=this,e=c.type;var f=(typeof c.originalEvent==="undefined")?c.type:c.originalEvent.type;h.lastOrigEventType=f;if(j){clearTimeout(j)}else{if(i.before){i.before.call(d,e,h)}}if(i.everyTime){i.everyTime.call(d,e,h)}k.push(e);j=setTimeout(function(){a(d)},i.threshold||100);if(i.allowPropagation){return true}else{return false}}};return b});tlRequire.define("fourDotsButton",["config","postMessageManager","animUtil","txt","actionLogger","abTest"],function(s,n,m,q,l,r){var o=false;function t(){return s.getBaseUrl()+"?buttonSource=badgeButtonBox"}function u(b,a,c){if((b.find(".tlFourDotsButton").length===0)&&(b.find(".tlFourDotsBanner").length===0)){return}v(b)}function v(b){b.find(".tlFourDotsButton").remove();b.find(".tlFourDotsBanner").remove();var d=null;var a=b.width();var i=300,f=300;if(s.usePromotionBanner&&b.width()>=i&&b.height()>=f){r.addBucket("bannerType",0,49,"bottomWide");r.addBucket("bannerType",50,99,"bottomWide");var c=r.variantForUser("bannerType");if(c==="square"){d=$tlJQ('<div class="tlFourDotsBanner"><div class="bannerImageAreaWrapper"><img class="bannerImage" src="'+s.getBaseUrl()+'/gfx/banners/banner-fairfield-square.png"  ><a class="homeLink" href="'+s.getBaseUrl()+'?buttonSource=badgeButtonBoxSquareBanner" target="_blank"><a class="promotedLink" href="http://fairfieldinn.thinglink.com/?buttonSource=squareBanner" target=_blank></a></div></div>');d.on("mouseover",function(){$tlJQ(this).find("img.bannerImage")[0].src=s.getBaseUrl()+"/gfx/banners/banner-fairfield-square-hover.png"});d.on("mouseout",function(){$tlJQ(this).find("img.bannerImage")[0].src=s.getBaseUrl()+"/gfx/banners/banner-fairfield-square.png"})}else{var g="banner-fairfield-bottom-wide-300.png",e="banner300",h=106,j=250;if(a>=800){g="banner-fairfield-bottom-wide-800.png";e="banner800";h=50;j=764}d=$tlJQ('<div class="tlFourDotsBanner tlBottomWideBanner"><div class="backgroundRect"></div><div class="bannerImageAreaWrapper"><img style="width:'+j+"px!important; height:"+h+'px!important;" class="bannerImage" src="'+s.getBaseUrl()+"/gfx/banners/"+g+'"><a class="homeLink '+e+'" href="'+s.getBaseUrl()+'?buttonSource=badgeButtonBoxWideBanner" target="_blank"><a class="promotedLink '+e+'" href="http://fairfieldinn.thinglink.com/?buttonSource=bottomWideBanner" target=_blank></a></div></div>')}if(!o&&(Math.random()<0.001)){o=true;var k=l.calcABTestString(b);l.logActivity({name:"showed promotion banner",sceneId:b.find(".thinglinkImage").attr("tl-scene-id"),isThinglinkSite:s.isThinglinkSite(),ABTests:k},true)}}else{d=$tlJQ('<div class="tlFourDotsButton"><div id="intro">'+q("FourDotsButton.MadeWithOrMakeYourOwn")+'</div><div id="logo"></div><a class="btn" href="'+t()+'" target="_blank"><span class="btnMessageShort">'+q("FourDotsButton.LearnMore")+'</span></a><div class="arrowRight"></div></div>')}d.appendTo(b);d.find("#logo").on("click",function(){window.open(t(),"_blank");return false})}function p(b,a){if(a.indicator){return}v(b);u(b)}return{setup:p,reposition:u}});tlRequire.define("globalCache",["jQuery"],function(i){var h=i();function f(a){h=h.add(a)}function g(){return h}function j(){h=i()}return{addQueriedImage:f,getQueriedImages:g,clear:j}});tlRequire.define("hashing",[],function(){function c(a){return Math.abs(d(a.src)).toString(16)}function d(b){var a=65521;var i=1,j=0;var h;for(h=0;h<b.length;++h){i=(i+b.charAt(h).charCodeAt())%a;j=(j+i)%a}return(j<<16)|i}return{adler32:d,generateImageHash:c}});tlRequire.define("imageEventHandlers",["jQuery","callbackManager","config","eventDebounce","jUtil","animUtil","actionLogger","util"],function(q,y,B,v,x,t,r,z){var A=false;var C=function(a){a.data("entertime",(new Date()).getTime());if(!A){q(window).blur(function(){q(".tlImageContainer").each(function(){r.logHoverTime(q(this))});return true});A=true}};var w="div.nubbin, .tlFirstseen, .tlSidebar";var p=function(a){if(!a.hasClass("tlHover")){C(a);a.addClass("tlHover");var b=a.find(w);t.variateOpacity("show",b)}},s=function(){return(B.makeSidebarSticky?"":".tlSidebar, ")+".tlFirstseen"+(B.makeNubbinsSticky?"":", div.nubbin.unpinned, div.nubbin .nubbinGlow")},u=function(a){setTimeout(function(){var b=q("#tlTagContainer div.tlThingText.mouseover");if(!a.hasClass("mouseover")&&b.length===0){a.removeClass("tlHover");r.logHoverTime(a);t.variateOpacity("hide",a.find(s()))}},30)};function D(b){b.removeClass("tlHover");b.find(s()).hide();var a=function(){if(!b.hasClass("mouseover")){b.addClass("mouseover")}setTimeout(function(){q("#tlTagContainer").children("div.tlThingText").mouseleave();p(b)},0)};b.unbind("mouseenter vclick").bind("mouseenter vclick",v({before:a,threshold:50,allowPropagation:true}));b.unbind("mouseleave").bind("mouseleave",function(){b.removeClass("mouseover");q("#tlTagContainer").children("div.tlThingText").removeClass("mouseover");u(b)});x.checkImageInViewport(b,function(){b.unbind("mousemove.temp").bind("mousemove.temp",function(){a();b.unbind("mousemove.temp")})})}y.runAfter("initcomplete",function(){if(z.isTouchDevice){q(document).unbind("touchstart.tlNubbinHide").bind("touchstart.tlNubbinHide",function(b){var c=b.target||b.srcElement;if(q(c).closest(".tlImageContainer").length>0||q(c).closest("#tlTagContainer").length>0){return}var a=new Date().getTime();q(document).unbind("touchend.tlNubbinHide").bind("touchend.tlNubbinHide",function(){q(this).unbind("touchend.tlNubbinHide");var d=new Date().getTime()-a;if(d>200){return}q(".tlImageContainer.tlHover").each(function(){q(this).trigger("mouseleave")})})})}});return{attach:D,showNubbins:p,hideNubbins:u}});tlRequire.define("init",["namespace","util","config","sceneCache","statusManager"],function(j,g,f,h,i){if(window.console===undefined){window.console={log:function(){},warn:function(){},error:function(){}}}(function(){j.init=function(){if(document.all&&!document.querySelector){return}var s=document.getElementsByTagName("script");var v;var e=s.length;while(e>0){e--;var t=s[e].getAttribute("src");if(t&&(t.indexOf(".thinglink.com")!=-1||t.indexOf(".thinglink.me")!=-1||t.indexOf("thinglink.local")!=-1||(f.isThinglinkSite()&&(t.indexOf("embed")!=-1)))){v=s[e];break}}var c;if(v){var d=v.getAttribute("tl-script-loaded");if(g.no(d)||d==="null"||d===null){c=v.src.replace(/^[^\#]+\#?/,"");v.setAttribute("tl-script-loaded",true)}}if(c){if(/^\d+$/.test(c)){var q=document.getElementsByTagName("img");var r=q[q.length-1];r.setAttribute("tl-scene-id",c);h.setCacheSceneId(r.src,c)}else{var b=v.getAttribute("height",2);var u=v.getAttribute("width",2);if(g.no(b)||b==="null"||b===null){b=null}if(g.no(u)||u==="null"||u===null){u=null}a(c,b,u,v)}}if(g.browserIsUnsupported()){return}};function a(d,p,e,b){var o=g.extractSceneId(d);var c=document.createElement("img");c.src=g.extractUrl(d);if(o.length>0&&o!=="0"){c.setAttribute("tl-scene-id",o)}var n={};if(p!==null){n.height=p}else{n["max-height"]=window.innerHeight+"px"}if(e!==null){n.width=e}else{n["max-width"]="100%"}c.style.cssText=g.mapToCssText(n,true);b.parentNode.insertBefore(c,b)}i.setStatus("loadcomplete")}());if(j.config.initAfterLoad){j.init()}return j.init});tlRequire.defineAsync("jQuery",["init","util","statusManager"],function(h,f,j,g){var i=(function(){var e;function b(r){var s="thinglinkJQueryScript";if(!window.__thinglinkInitStarted){window.__thinglinkInitStarted=true;if(window.$tlJQ){r()}else{var q=document.createElement("script");q.type="text/javascript";q.id=s;var t=function(){window.$tlJQ=jQuery.noConflict(true);r()};if(q.addEventListener){q.addEventListener("load",t,false)}else{q.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){t()}}}q.setAttribute("src",f.getProtocol()+"//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js");var p=document.getElementsByTagName("head")[0];p.appendChild(q)}}}function a(l){if(e){e()}if(document.readyState==="interactive"){l()}else{if(typeof(document.documentElement.style.WebkitAppearance)!=="undefined"&&document.readyState==="loaded"){l()}else{$tlJQ(document).ready(l)}}}function c(l){b(function(){a(l)})}function d(l){e=l}return{loadJQuery:c,initCallback:d}}());i.initCallback(function(){j.setStatus("initcomplete")});i.loadJQuery(function(){j.setStatus("jqueryready");g(true,window.$tlJQ)})});tlRequire.define("jQueryPostMessage",["jQuery"],function(c){
/*!
     * jQuery postMessage - v0.5 - 9/11/2009
     * http://benalman.com/projects/jquery-postmessage-plugin/
     *
     * Copyright (c) 2009 "Cowboy" Ben Alman
     * Dual licensed under the MIT and GPL licenses.
     * http://benalman.com/about/license/
     */
;var d=function(b){var s,r,a=1,t,o=this,n="postMessage",q="addEventListener",p,m=o[n];b[n]=function(e,f,g){if(!f){return}e=typeof e==="string"?e:b.param(e);g=g||parent;if(m){g[n](e,f.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))}else{if(f){g.location=f.replace(/#.*$/,"")+"#"+(+new Date())+(a++)+"&"+e}}};b.receiveMessage=p=function(f,g,e){if(m){if(f){if(typeof t==="function"&&t()){p()}t=function(h){if((typeof g==="string"&&h.origin!==g)||(b.isFunction(g)&&g(h.origin)===false)){return false}f(h)}}if(o[q]){o[f?q:"removeEventListener"]("message",t,false)}else{o[f?"attachEvent":"detachEvent"]("onmessage",t)}}else{if(s){clearInterval(s)}s=null;if(f){e=typeof g==="number"?g:typeof e==="number"?e:100;s=setInterval(function(){var h=document.location.hash,i=/^#?\d+&/;if(h!==r&&i.test(h)){r=h;f({data:h.replace(i,"")});document.location.hash=""}},e)}}}};d(c);return c.postMessage});tlRequire.define("jQueryTlImage",["jQuery","adMatcher","config","globalCache"],function(i,g,j,h){function f(){var a=/^data:/;var b=/^https?:\/\/mt\d+\.google\.com\//;var c={sceneData:function(d){if(!d){return this.data("scene")}else{this.data("scene",d)}},hasSize:function(){if(this.tlImage("isLoaded")){return true}else{var d=(this.height()!==0)&&(this.width()!==0);var e=!(this.height()===24&&this.width()===24);var n=!(this.height()===0&&this.width()===0);var o=!(this.height()===1&&this.width()===1);var p=!(document.body.attachEvent&&window.ActiveXObject&&this.width()===28&&this.height()===30);return d&&e&&p&&n&&o}},isLoaded:function(){return(this[0].complete||this[0].readyState===4)},isInspectedByThinglink:function(){return h.getQueriedImages().is(this)||this.hasClass("thinglinkImage")||this.hasClass("thinglinkFiltered")},isWhitelabel:function(){var d=this.tlImage("sceneData");return d.branding!==undefined&&d.branding!=="thinglink"},hasThinglinkBadge:function(){var d=this.tlImage("sceneData");return d.indicator===undefined},isAlwaysThinglink:function(){var d=this;return d.hasClass("alwaysThinglink")},isOk:function(){var e=this;if(e.tlImage("isAlwaysThinglink")){return true}if(e.closest(".neverThinglink").length){return false}if(e.css("display")=="none"){return false}var m=e.attr("src");if(g.test(m)||a.test(m)||b.test(m)){return false}var d=["#lightboxImage","#lightbox-image",".cboxPhoto","#fancybox-img",".fancybox-image"];var n=false;i.each(d,function(k,l){if(e.is(l)){n=true;return false}});if(n){return false}if(!e.tlImage("hasSize")){return true}if(window.screen&&(screen.width<=480)){return(e.width()>screen.width/3)&&(e.height()>screen.width/3)}return(e.height()>=j.minHeight&&e.width()>=j.minWidth)},scrollTo:function(){var d=this;var e;if(Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0){e=i("body")}else{e=i("html,body")}var l=e.scrollTop();i(window).load(function(){var k=d.offset().top-40;if(Math.abs(e.scrollTop()-l)<50){e.stop().animate({scrollTop:k},"fast")}})}};i.fn.tlImage=function(d){return c[d].apply(this,Array.prototype.slice.call(arguments,1))}}f();return i.fn.tlImage});tlRequire.define("jQueryVMouse",["jQuery"],function(d){if(d.vmouse){return d.vmouse}function c(ak,ab,aC){var ac="virtualMouseBindings",aF="virtualTouchID",aG=["vmouseover","vmousedown","vmousemove","vmouseup","vclick","vmouseout","vmousecancel"],al=["clientX","clientY","pageX","pageY","screenX","screenY"],af=ak.event.mouseHooks?ak.event.mouseHooks.props:[],aj=ak.event.props.concat(af),ah={},aa=0,ap=0,aq=0,at=false,X=[],aA=false,a=false,an=(aC.addEventListener),ao=ak(aC),ad=1,U=0,aE;ak.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};function ar(e){while(e&&typeof e.originalEvent!=="undefined"){e=e.originalEvent}return e}function az(l,k){var o=l.type,n,p,j,m,e,f,g,h,q;l=ak.Event(l);l.type=k;n=l.originalEvent;p=ak.event.props;if(o.search(/^(mouse|click)/)>-1){p=aj}if(n){for(g=p.length,m;g;g){m=p[--g];l[m]=n[m]}}if(o.search(/mouse(down|up)|click/)>-1&&!l.which){l.which=1}if(o.search(/^touch/)!==-1){j=ar(n);o=j.touches;e=j.changedTouches;f=(o&&o.length)?o[0]:((e&&e.length)?e[0]:undefined);if(f){for(h=0,q=al.length;h<q;h++){m=al[h];l[m]=f[m]}}}return l}function i(e){var g={},h,f;while(e){h=ak.data(e,ac);for(f in h){if(h.hasOwnProperty(f)){if(h[f]){g[f]=g.hasVirtualBinding=true}}}e=e.parentNode}return g}function ag(e,f){var g;while(e){g=ak.data(e,ac);if(g&&(!f||g[f])){return e}e=e.parentNode}return null}function Y(){a=false}function ax(){a=true}function b(){U=0;X.length=0;aA=false;ax()}function au(){Y()}function am(){ai();aa=setTimeout(function(){aa=0;b()},ak.vmouse.resetTimerDuration)}function ai(){if(aa){clearTimeout(aa);aa=0}}function av(f,e,h){var g;if((h&&h[f])||(!h&&ag(e.target,f))){g=az(e,f);ak(e.target).trigger(g)}return g}function ay(f){var e=ak.data(f.target,aF);if(!aA&&(!U||U!==e)){var g=av("v"+f.type,f);if(g){if(g.isDefaultPrevented()){f.preventDefault()}if(g.isPropagationStopped()){f.stopPropagation()}if(g.isImmediatePropagationStopped()){f.stopImmediatePropagation()}}}}function T(g){var e=ar(g).touches,f,j;if(e&&e.length===1){f=g.target;j=i(f);if(j.hasVirtualBinding){U=ad++;ak.data(f,aF,U);ai();au();at=false;var h=ar(g).touches[0];ap=h.pageX;aq=h.pageY;av("vmouseover",g,j);av("vmousedown",g,j)}}}function Z(e){if(a){return}if(!at){av("vmousecancel",e,i(e.target))}at=true;am()}function aD(e){if(a){return}var g=ar(e).touches[0],h=at,f=ak.vmouse.moveDistanceThreshold,j=i(e.target);at=at||(Math.abs(g.pageX-ap)>f||Math.abs(g.pageY-aq)>f);if(at&&!h){av("vmousecancel",e,j)}av("vmousemove",e,j);am()}function aB(e){if(a){return}ax();var h=i(e.target),f;av("vmouseup",e,h);if(!at){var g=av("vclick",e,h);if(g&&g.isDefaultPrevented()){f=ar(e).changedTouches[0];X.push({touchID:U,x:f.clientX,y:f.clientY});aA=true}}av("vmouseout",e,h);at=false;am()}function ae(f){var e=ak.data(f,ac),g;if(e){for(g in e){if(e.hasOwnProperty(g)){if(e[g]){return true}}}}return false}function V(){}function aw(f){var e=f.substr(1);return{setup:function(h,j){if(!ae(this)){ak.data(this,ac,{})}var g=ak.data(this,ac);g[f]=true;ah[f]=(ah[f]||0)+1;if(ah[f]===1){ao.bind(e,ay)}ak(this).bind(e,V);if(an){ah.touchstart=(ah.touchstart||0)+1;if(ah.touchstart===1){ao.bind("touchstart",T).bind("touchend",aB).bind("touchmove",aD).bind("scroll",Z)}}},teardown:function(h,j){--ah[f];if(!ah[f]){ao.unbind(e,ay)}if(an){--ah.touchstart;if(!ah.touchstart){ao.unbind("touchstart",T).unbind("touchmove",aD).unbind("touchend",aB).unbind("scroll",Z)}}var g=ak(this),k=ak.data(this,ac);if(k){k[f]=false}g.unbind(e,V);if(!ae(this)){g.removeData(ac)}}}}var W;for(W=0;W<aG.length;W++){ak.event.special[aG[W]]=aw(aG[W])}if(an){aC.addEventListener("click",function(h){var l=X.length,g=h.target,e,f,n,j,m,k;if(l){e=h.clientX;f=h.clientY;aE=ak.vmouse.clickDistanceThreshold;n=g;while(n){for(j=0;j<l;j++){m=X[j];k=0;if((n===g&&Math.abs(m.x-e)<aE&&Math.abs(m.y-f)<aE)||ak.data(n,aF)===m.touchID){h.preventDefault();h.stopPropagation();return}}n=n.parentNode}}},true)}}c(d,window,document);return d.vmouse});tlRequire.define("jUtil",["jQuery"],function(f){function e(l,o){var n=f(window);var b=n.scrollLeft(),p=n.scrollTop(),a=l.offset(),m=a.left,c=a.top;if(c+l.height()>p+5&&c<p+n.height()-5&&m+l.width()>b+5&&m<b+n.width()-5){o()}}function d(c){var b=f(c);var a,i;var j;if(b.hasClass("tlThingText")){i=b;j=i.attr("id").match(/tl-a-([0-9]+)/)[1];a=f(".tagx.tl-a-"+j)}else{a=b;j=b.attr("tl-thing-id");i=f("#tl-a-"+j)}return{nubbin:a,bubble:i}}return{checkImageInViewport:e,getThingPieces:d}});tlRequire.define("main",["namespace","callbackManager","statusManager","jQuery","util","config","cssUtil","tagFetcher","measure","txt","nubbinIconSizeManager","nodeChangeTracker","actionLogger","nubbinRenderer","eventCallback","postMessageManager","sceneUtil","sceneCache","touchManager","hashing","animUtil","fourDotsButton","editor","sharePopup","bubbleRenderer","cssInjector","jUtil","imageEventHandlers","positionThing","tagEventHandlers","eventDebounce","abTest","errorReporter","globalCache","customization"],function(O,W,ae,Y,ar,L,S,ak,am,K,Q,an,M,P,J,ah,N,aa,ai,X,ag,U,aj,af,al,Z,ac,R,ap,T,aq,ab,V,ao,ad){(function(){var ay=["Edit","Touch","Share"];var a=["Touch","Share"];if(L.disableEditorButton){ay.splice(0,1)}function r(aM,aP){aP=aP||["imgHash","scriptHash","imgAttr"];var aN=null,aA=null;if(Y.inArray("imgAttr",aP)!==-1){aN=aM.attr("tl-scene-id");aA=aM.attr("tl-passkey")}if(!aN&&Y.inArray("scriptHash",aP)!==-1){var aJ=aM.next().filter("script").attr("src");if(!aJ){aJ=aM.closest(".tlImageContainer").nextUntil().filter("script").first().attr("src")}if(!!aJ&&aJ.indexOf("zmiti.")!==-1){aN=aJ.replace(/^[^\#]+\#?/,"")}}if(!aN&&Y.inArray("imgHash",aP)!==-1){var aL=aM.attr("src");if(!!aL){var aO=aL?aL.match(/^[^\#]+\#fly-([^;]+);(.*)?$/):null;if(!!aO){var aK=aL.match(/[\?&]tlpasskey=(\w+)/);aN=aO[1];aA=!!aK?aK[1]:null}}}return{id:aN,passkey:aA}}function z(aS,aV,aT){if(aV){aS.addClass("thinglinkImage");aS.removeClass("thinglinkFiltered");if(L.disableMenuItems){var aQ=ay.indexOf("Share");if(aQ!==-1){ay.splice(aQ,1)}var aA=ay.indexOf("Touch");if(aA!==-1){ay.splice(aA,1)}}if(aS.parents(".tlImageContainer").length===0){var aU='<div class="tlSidebar">',aO,aR="";var aX=[].concat(ay).concat(L.extraSidebarIcons);var aP=ar.isTouchDevice?"":"tlNonTouchDevice";var aW='<span class="tlMenuItem tlMenuItem:curLabel :touchClass"><a class="tlMenuIcon tlMenu:curLabel" href="#"></a><span class="tlMenuLabel tlMenuLabel:curLabel">:labelText</span></span>';for(aO=0;aO<aX.length;aO++){aU+=aW.replace(/:curLabel/gi,aX[aO]).replace(":touchClass",aP).replace(":labelText",K("Sidebar."+aX[aO]))}aU+="</div>";aS.wrap('<div class="tlImageContainer">');aS.parent().append('<div class="tlMenuContainer"><span class="tlMenu"></span></div>'+aU+"</div>")}}else{aS.addClass("thinglinkFiltered");aS.removeClass("thinglinkImage")}var aN=aS.parents(".tlImageContainer");if(aT){aN.addClass("tlNoTags")}else{aN.removeClass("tlNoTags")}}function s(aE){var aA=[];var aF=[];Y("img").each(function(){var aD=Y(this);var aK=r(aD,["imgHash"]);var aJ=aK.id;if(aJ){aD.attr("tl-scene-id",aJ)}if(aD.tlImage("isOk")){if(!aD.tlImage("isInspectedByThinglink")){var aL=aD.attr("tl-scene-id");var aC=aD.attr("tl-passkey")||aK.passkey;if((!aL||aL.charAt(0)=="$")&&window.__tlid){aL=N.getSceneUrl(this)}if(aL){ao.addQueriedImage(aD);if(Y.inArray(aL,aA)===-1){aA.push(aL);if(aC){aF.push(aC)}}}}}else{z(aD,false)}});if(aA.length>0){ak.fetchTags(aA,aF,aE);Z.injectEmbedCSS()}}O.rebuild=function(aE){if(!aE){Y("img.thinglinkFiltered").removeClass("thinglinkFiltered");Y("img.thinglinkImage").removeClass("thinglinkImage");ao.clear();s(true)}else{var aF=ar.extractSceneId(aE),aA=[];if(aF!==""&&aF.charAt(0)!=="$"){aA=Y("img[tl-scene-id="+aF+"]")}ak.finalFetchCompleteCallback(function(){var aC;for(aC=0;aC<aA.length;aC++){O.reposition(Y(aA[aC]))}ae.setStatus("tagfetchcomplete")});ao.addQueriedImage(aA);ak.fetchTags(aE,null,true);Z.injectEmbedCSS()}};function at(aA){if(aA.css("margin-left")=="auto"&&aA.css("margin-right")=="auto"){return true}if(!window.addEventListener){return false}var aI=getComputedStyle(aA[0],null);if(aI.getPropertyValue("margin-left")!=="0px"||aI.getPropertyValue("left")!=="auto"||aI.getPropertyValue("right")!=="auto"||aI.getPropertyValue("float")==="left"||aI.getPropertyValue("float")==="right"){return false}var aM=aA.closest(".tlImageContainer").parent(),aN=getComputedStyle(aM[0]),aK=aA[0].getBoundingClientRect(),aL=aM[0].getBoundingClientRect();var aJ=aK.left-aL.left-parseInt(aN.getPropertyValue("border-left-width"),10)-parseInt(aN.getPropertyValue("padding-left"),10)-parseInt(aI.getPropertyValue("margin-left"),10);return aJ>0}function az(aM,aR,aP,aL){var aQ=aR[0].style.cssText;aR.data("tlOriginalCss",aQ);var aO=S.parseCssText(aQ,false,true),aS={};aS=ar.extend(aS,aP);aS.width=aP.rawWidth+"px";aS.height=aP.rawHeight+"px";aO.padding="0";aO.border="0";aO.margin="0";aS["z-index"]=(aL-1);if(aR.css("display")=="block"){aS.display="block";aM.css("display","block");if(at(aR)){aS["margin-left"]="auto";aS["margin-right"]="auto"}}var aN=aR.css("position");if(aN==="absolute"||aN==="relative"){aS.position=aN;aS.top=aP.top;aS.right=aP.right;aS.bottom=aP.bottom;aS.left=aP.left;aO.position="static";if(aN==="absolute"){aS["z-index"]=aL}}var aA=aR.css("float");if(aA==="left"||aA==="right"){aS["float"]=aA;delete aO["float"]}if(aO["max-width"]&&aO["max-width"]!="none"){aS["max-width"]=aO["max-width"];aO["max-width"]="100%"}aO.width="100%";aO.height="100%";aR.css({cssText:ar.mapToCssText(aO,true)});aM.css({cssText:ar.mapToCssText(aS,true,true)});var aT=am.getExtent(aR);aM.find("div.tlMenuContainer").each(function(){Y(this).css("cssText","right:"+aT.r+"px !important; bottom:"+aT.b+"px !important; z-index:"+aL)});aM.find("div.tlSidebar").each(function(){Y(this).css("cssText","right:"+aT.r+"px !important; top:"+aT.t+"px !important; z-index:"+(aL+1))});U.reposition(aM,aT,aL);if(L.isThinglinkSite()){if(aR.width()<500||aR.height()<500){aM.addClass("tlSmallNavi")}else{aM.removeClass("tlSmallNavi")}}else{if(aR.width()<800||aR.height()<600){aM.addClass("tlSmallNavi")}else{aM.removeClass("tlSmallNavi")}}if(!ar.isTouchDevice&&(aR.width()<150||aR.height()<300)){aM.addClass("tlVerySmallNavi")}else{aM.removeClass("tlVerySmallNavi")}if(aR.width()<50||aR.height()<150){aM.addClass("tlNoBadgeIcon")}else{aM.removeClass("tlNoBadgeIcon")}if(L.makeSidebarSticky){aM.find("div.tlSidebar").show()}}O.reposition=function(aW){if(!aW){var aX=Y(".tlImageContainer .thinglinkImage"),aS;for(aS=0;aS<aX.length;aS++){O.reposition(aX.eq(aS))}}else{var aQ=Y(aW).closest(".tlImageContainer"),aR=Y(aW).parent(),aY=aQ.find(".tagx"),aA=aQ.css("display"),aU;if(aQ.length===0){return}var a0=aQ.css("z-index");a0++;aQ[0].style.cssText="display: none;";aQ.before(aW);aW[0].style.cssText=aW.data("tlOriginalCss");var aT={w:0,h:0};if(aW.tlImage("hasSize")){aT=am.getDimensions(aW)}aR.prepend(aW);aQ.css("display",aA);az(aQ,aW,aT,a0);var aV={l:0,t:0};if(aQ.css("box-sizing")==="content-box"){var a2=am.getExtent(aQ[0]);aV.l=a2["padding-left"];aV.t=a2["padding-top"]}var a3,aZ,a1;for(aU=0;aU<aY.length;aU++){a3=aY.eq(aU);aZ=a3.data("thing");a1=am.getThingRect(aW,aZ);a1.l=a1.l+aV.l;a1.t=a1.t+aV.t;S.repositionElement(a1,a3[0]);if(a3.hasClass("hovered")){ap(a3)}}Q.resizeAllNubbinsIfTooSmall()}};O.removeTags=function(aA){if(!aA){aA=Y("body")}var aD=Y(aA).find(".tlThingContainer");Y.each(aD,function(aL,aC){var aK=Y(aC);var aI=aK.find(".tagx");var aJ=aI.attr("tl-thing-id");Y("#tl-a-"+aJ).remove();aK.remove()})};O.renderTag=function(aA,aJ){var aI=al.render(aJ,null,ap);aI.appendTo("#tlTagContainer");var aH=aI.data("bubbledata");var aG=P.render(aA,aJ,aH.rtid);return{hoverHandler:aH.hoverHandler,clickHandler:aH.clickHandler,template:aG,bubble:aI}};O.prepareTagForDisplay=function(){T.prepareTagForDisplay.apply(this,arguments)};O.openEditor=function(aH,aA,aF,aG){aj.open(aH,aA,aF,aG)};O.openShare=function(aI,aK){var aA=Y(aI);var aL=aK?Y(aK).attr("tl-channel-id"):null;var aN=aA.closest(".tlImageContainer");if(aL){var aM={id:aL};af.setup(aN,aA,aM)}else{var aJ=aA.tlImage("sceneData");af.setup(aN,aA,aJ)}};O.openTouch=function(aA){Y(aA).closest(".tlImageContainer").find(".tlMenuTouch").click()};O.addExternalCss=Z.addExternalCss;O.closeAllStickyTags=function(){N.closeAllStickyTags()};O.highlightImage=function(aQ){function aK(aF,aC){var aE=aF.find(".nubbin.unpinned");var aD=aF.find(".nubbin .nubbinGlow");return setTimeout(function(){var aG=2500;if(!aF.hasClass("tlHover")&&!L.makeNubbinsSticky){ag.variateOpacity("hide",aE,aG)}ag.variateOpacity("hide",aD,aG/2);aQ.data("hideNubbinsTimeout",0)},aC)}var aO=aQ.closest(".tlImageContainer");var aN=L.initialNubbinShowDuration;if(aQ.data("hideNubbinsTimeout")){clearTimeout(aQ.data("hideNubbinsTimeout"));aQ.data("hideNubbinsTimeout",aK(aO,aN))}else{var aM=aO.find(".nubbin");var aL=aM.find(".nubbinGlow");ag.variateOpacity("show",aL,aN);ag.variateOpacity("show",aM,100);var aR=aK(aO,aN);aQ.data("hideNubbinsTimeout",aR)}if(L.highlightCallback){var aP=aQ.tlImage("sceneData");if(L.highlightCallback(aP,aO)){M.logSceneView(aO)}}if(Math.random()<0.001){var aA=M.calcABTestString(aO);M.logActivity({name:"sampled scene view",sceneId:aO.find(".thinglinkImage").attr("tl-scene-id"),isThinglinkSite:L.isThinglinkSite(),ABTests:aA},true)}};function c(aD,aA){ac.checkImageInViewport(aD,function(){if(aA.hasClass("tlSneakPeeked")){return}aA.addClass("tlSneakPeeked");O.highlightImage(aD.find(".thinglinkImage"))})}function n(aG,aH){var aA=aG.parents(".tlImageContainer").find(".tlContextMenu");aA.show();var aI=aH.pageX-aG.offset().left;var aJ=aH.pageY-aG.offset().top;aA.css("cssText","display: block; left: "+aI+"px !important; top: "+aJ+"px !important; z-index: "+aA.css("z-index"))}function t(aE){var aA=aE.find(".thinglinkImage");if(!L.disableContextMenu){var aF=Y(aE).find(".tagx");if(aF.length>0){Y.each([aF,aA],function(aC,aD){aD.bind("contextmenu",function(aH){if(!L.disableMenuItems){n(aA,aH)}return false})})}}}function H(aA){setTimeout(function(){var aE=aA.find(".nubbin");function aF(){setTimeout(function(){c(aA,aE)},0)}aF();Y(window).scroll(aq({after:aF,threshold:80}))},0)}function j(aJ,aM){var aN=false;var aL=navigator.userAgent.indexOf("Trident")!==-1;var aP=window.location.href.indexOf("/channelcard/")!==-1;if(aJ&&!(aL&&aP)){aN=true;if(aJ.requestFullscreen){aJ.requestFullscreen()}else{if(aJ.mozRequestFullScreen){aJ.mozRequestFullScreen()}else{if(aJ.webkitRequestFullscreen){aJ.webkitRequestFullscreen()}else{if(aJ.msRequestFullscreen){aJ.msRequestFullscreen()}else{aN=false}}}}}if(!aN){var aO=Y(aJ);var aK=aO.find(".channelCarousel");var aA="";if(window.location.href.indexOf("on=fb")!==-1){aA="&on=fb"}if(aK.length>0){window.open(L.getBaseUrl()+"/channelcard/"+aK.attr("tl-channel-id")+"?fullscreen=true"+aA,"_blank")}else{window.open(L.getBaseUrl()+"/card/"+aM+"?fullscreen=true"+aA,"_blank")}}}function g(aI,aJ){var aL=aI.height(),aK=aI.width(),aH=false,aA="tlFullscreen";return function(){var aC=aK/aL;if(aH){Y("#tlFullscreenUpsell").hide();aI.attr("height",aL).attr("width",aK);aJ.removeClass(aA);aJ.closest(".tlFullscreenable").removeClass(aA)}else{aI.attr("height",screen.height).attr("width",screen.height*aC);aJ.addClass(aA);aJ.closest(".tlFullscreenable").addClass(aA);Y("#tlFullscreenUpsell").show()}aH=!aH}}function au(aK,aI,aJ){var aM=ab.activeTestsForUser();var aL=JSON.stringify(aM);Y(document).off("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange").on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",g(aI,aK,aJ));var aN,aA=aK.closest(".tlFullscreenable");if(aA.length>0){aN=aA[0]}j(aN,aJ.id);M.logActivity({name:"clicked in-image fullscreen",sceneId:aK.find(".thinglinkImage").attr("tl-scene-id"),isThinglinkSite:L.isThinglinkSite(),ABTests:aL});return false}function x(aI,aA,aG){ai.touch(aI,N.isSceneTouched(aG.id));aI.find(".tlPopup").hide();var aJ=ab.activeTestsForUser();var aH=JSON.stringify(aJ);M.logActivity({name:"clicked in-image touch",sceneId:aI.find(".thinglinkImage").attr("tl-scene-id"),isThinglinkSite:L.isThinglinkSite(),ABTests:aH});return false}function av(aF,aA,aE){af.setup(aF,aA,aE)}function m(aF,aA,aE){if(typeof(aE.allowEdit)!="undefined"&&aE.allowEdit===false){aF.find(".tlMenuEdit").parent().hide()}else{aF.find(".tlMenuEdit").parent().unbind("click").click(function(aC){aC.preventDefault();aj.open(aA)})}}function E(aQ){var aO=aQ[0];var aR=aQ[1];var aP=aQ[2];var aA=N.findImageContainer(aR).find(".tlMenuItemTouch");var aU=aA.find(".tlMenuLabelTouch");var aT;if(aO){aT="Untouch";aA.removeClass("tlTouch").addClass("tlUntouch")}else{aT="Touch";aA.removeClass("tlUntouch").addClass("tlTouch")}if(aP===undefined){aP=0}var aV=aU.data("tlTouchCount");if(aV){aU.data("tlTouchCount",aV+aP)}else{aU.data("tlTouchCount",aP)}aU.text(K("Sidebar."+aT));var aS=aU.data("tlTouchCount");if(aS==1){aU.prev().attr("title",aS+" touch")}else{aU.prev().attr("title",aS+" touches")}var aM;if(aS===1){aM=K("TouchSidebarButton.TouchesOne")}else{if(aS===0){aM=K("TouchSidebarButton.TouchesNo")}else{aM=K("TouchSidebarButton.TouchesOther",aS)}}aU.prev().attr("title",aM);if(L.isThinglinkSite()){var aN;if(aS===1){aN=K("TouchDialog.TouchesOne")}else{if(aS===0){aN=K("TouchDialog.TouchesNo")}else{aN=K("TouchDialog.TouchesOther",aS)}}Y("#touchCountPhrase").text(" "+aN)}return aS}function aw(aM,aI,aJ){if(aJ.indicator){var aK=L.getCDNUrl()+"/api/nubbin/"+aJ.indicator+"/plain";var aL='background-image: url("'+aK+'") !important;';Y(aM).find(".tlMenu").css("cssText",aL).parent().addClass("tlMenuCustomIndicatorContainer");var aA=new Image();var aN=function(){Y(aM).find(".tlMenu").css("cssText",aL+";width:"+aA.width+"px!important;height:"+aA.height+"px!important")};if((aA.complete||aA.readyState===4)&&(aA.width>0)){aN()}else{aA.onload=aN;aA.src=aK}}else{if(aJ.branding===""||!aJ.id){Y(aM).find(".tlMenuContainer").remove()}}}function y(aO,aP,aA){aO.find(".tlContextMenu").remove();var aJ=Y('<div class="tlContextMenu"></div>');aJ.css("z-index",aP+1);aJ.bind("contextmenu",function(){return false});var aK=function(aC){return function(){aO.find(".tlMenu"+aC).click();aJ.hide();return false}};var aM,aN,aL=L.isThinglinkSite();for(aM=0;aM<a.length;aM++){aN=a[aM];if(!aA[aN.toLowerCase()]||aL){Y('<div class="tlContextMenuItem tlContextMenu'+aN+'">'+K("ContextMenu."+aN)+"</div>").bind("click",aK(aN)).appendTo(aJ)}}aO.append(aJ);aJ.attr("unselectable","on").css("-moz-user-select","none").each(function(){this.onselectstart=function(){return false}});Y("body").click(function(){if(aJ.css("display")!=="none"){aJ.hide()}});aJ.hide()}function D(aA){aA=aA.filter(".tlVariantImageThing");aA.find("img").bind("load",function(){if(aA.is(":visible")){ap(ac.getThingPieces(aA).nubbin)}})}function G(aE,aA,aF){ad.applyNewStyles(aE,aA,aF)}function u(aK,aI,aL,aA,aJ,aH){setTimeout(function(){var aD=am.getThingRect(aI,aL);var aG={l:0,t:0};if(aK.css("box-sizing")==="content-box"){var aP=am.getExtent(aK[0]);aG.l=aP["padding-left"];aG.t=aP["padding-top"]}aD.l=aD.l+aG.l;aD.t=aD.t+aG.t;var aQ=Y("#tl-a-"+aL.id);if(aQ.length===0){aQ=al.render(aL,aJ,ap);D(aQ);G(aQ,aL.styles,ar.getSourceDomain(aL.contentUrl));aQ.appendTo("#tlTagContainer")}var aE=aQ.data("bubbledata");aK.find(".tl-a-"+aL.id).parent().remove();var aR=P.render(aD,aL,aE.rtid);aR.appendTo(aK);var aC=aR.find(".tl-a-"+aL.id).first();aC.data("thing",aL);aQ.css("cssText",aQ[0].style.cssText+"z-index: "+(aA+1)+";");var aF=aC.find(".nubbin").last();aF.css("z-index",aA);T.attach(aC,aK);if(aH){aH(aL)}},0)}function k(aD,aA){aD.find(".tagx").each(function(){var aC=ac.getThingPieces(this);var aI=aC.nubbin.attr("tl-thing-id");var aJ=true;var aL,aK;if((aA!==undefined)){for(aL=0;aL<aA.length;aL++){aK=aA[aL];if(aI===aK.id){aJ=false;break}}}if(aJ){aC.bubble.remove();aC.nubbin.remove()}})}function B(bb){var bx,bi,ba;if(!bb.tlImage("isOk")){z(bb,false);return}bi=am.getDimensions(bb);bx=bb.tlImage("sceneData");if(!bx){if(bb.tlImage("isInspectedByThinglink")){return}bx={things:[],allowEdit:true}}ba=(bx.things&&bx.things.length!==0);z(bb,true,!ba);try{bb.parents("a").addClass("tlWrappingAnchor");if(!ar.no(bx.id)){bb.attr("tl-scene-id",bx.id)}var bt=bb.closest(".tlImageContainer");var a6=bb.tlImage("isWhitelabel");if(!a6&&bx.showFourDotsMenu&&L.fourDotsInfo){U.setup(bt,bx);bx.branding=""}else{if(bb.tlImage("hasThinglinkBadge")){bt.find(".tlMenu").wrap('<a href="https://www.thinglink.com?buttonSource=badgeButtonBoxPro"></a>')}}var bc=bb.css("z-index")||0;var bh=1;bc=(bc==="auto")?1:parseInt(bc,10)+bh;if(bx.titleUrl!==undefined){var a7=am.getExtent(bb);var bs=ar.getDomain(bx.titleUrl);var aA=Y('<div class="tlFirstseen"><a href="'+bx.titleUrl+'">'+K("OriginallyThinglinked",bs)+"</a></div>");bt.append(aA);aA.css("cssText","bottom: "+a7["padding-bottom"]+"px !important; left: "+a7["padding-left"]+"px !important;");aA.click(function(){window.location=Y(this).find("a").attr("href")})}az(bt,bb,bi,bc);m(bt,bb,bx);var bd=(bi.w<130||bi.h<130);var bo=(Y(window).width()<300||Y(window).height()<140);var bq=function(){bt.find(".tlMenuItemShare,.tlMenuItemTouch").hide()};var a8=L.isThinglinkSite();var bu=bx.hideitems||{touch:false,share:false};var bm=function(){if(L&&L.extraSidebarIcons&&L.extraSidebarIcons.indexOf("Post")!==-1){Y.ajax({url:window.contextPath+"/api/user/me/channels?contains="+bx.id+"&scope=groups",success:function(aK){var aF=Y(".tlMenuItemPost"),aJ=aK.results,aI=true,aE=function(aS,aT){if(aS.title>aT.title){return 1}if(aS.title<aT.title){return -1}return 0};aJ.sort(aE);function aR(aS){return aS.map(function(aT){return'<div id="progress-'+escapeHtml(aT.id)+'" class="channelProgress"></div><div class="channel"><input type="checkbox" class="addToChannel" id="'+escapeHtml(aT.id)+'"'+(aT.contains[bx.id]?' checked="true"':"")+'/> <div class="title">'+escapeHtml(aT.title)+'</div><div id="checked-'+escapeHtml(aT.id)+'" class="_icon_checked checked" style="display: '+(aT.contains[bx.id]?"inline-block":"none")+'"></div><div id="unchecked-'+escapeHtml(aT.id)+'" class="_icon_unchecked checked" style="display: '+(aT.contains[bx.id]?"none":"inline-block")+'"></div></div>'}).join("")}function aO(aS,aU){var aT=[];if(aS&&aS!==" "){aU.map(function(aV){if(aV.title.toLowerCase().indexOf(aS.toLowerCase())!==-1){aT.push(aV)}})}else{aT=aU}return aT}function aH(aS){return'<input dir="auto" id="channelSearch" name="channelSearch" type="text" placeholder="Find or create channel" maxlength="60"/>'.concat('<button style="display:none" id="addChannel" class="btn btn-primary _icon_add"> Create new channel</button>').concat('<div id="channelError" style="display: none"></div>').concat('<div id="channelList">').concat(aR(aS)).concat("</div>")}function aG(aS){if(aS){var aT=document.getElementById("channelSearch").value;if(aT&&aJ.map(function(aU){return aU.title.toLowerCase().trim()!==aT.toLowerCase().trim()}).reduce(function(aV,aU){return aV&&aU})){document.getElementById("addChannel").setAttribute("style","display: inline")}else{document.getElementById("addChannel").setAttribute("style","display: none")}return aS}else{document.getElementById("addChannel").setAttribute("style","display: inline");return""}}function aQ(){aI=true;aF.popover("hide")}function aC(aS,aT){aT.map(function(aU){if(aU.id===aS){aU.contains[bx.id]=true}});document.getElementById(aS.toString()).checked=true;document.getElementById("checked-"+aS).setAttribute("style","display: inline-block");document.getElementById("unchecked-"+aS).setAttribute("style","display: none")}function aD(aS,aT){aT.map(function(aU){if(aU.id===aS){aU.contains[bx.id]=false}});document.getElementById("checked-"+aS).setAttribute("style","display: none");document.getElementById("unchecked-"+aS).setAttribute("style","display: inline-block")}function aP(aS,aU){var aT=document.getElementById("channelList");while(aT.firstChild){aT.removeChild(aT.firstChild)}Y(aT).append(aG(aR(aO(aS,aU),aU)))}function aL(){aF.popover({container:"body",placement:"left",title:'<span class="_icon_images"></span> Post to channel<span id="closeAddChannel" class="_icon_close"></span>',content:aH(aJ),trigger:"click",html:true})}function aN(aS){var aT=document.getElementById("channelError");aT.textContent=JSON.parse(aS.responseText).error.description;aT.setAttribute("style","display: block")}aL();aF.on("vclick",function(){if(aI){if(aJ.length>15){Y("body").addClass("fixPopover")}if(!(document.documentElement.hasOwnProperty("ontouchstart"))){Y("#channelSearch").focus()}}else{aF.popover("destroy");aL()}aI=!aI});function aM(){var aT=document.getElementById("channelSearch"),aU=document.getElementById("addChannel"),aS=aT.value.trim();aT.setAttribute("disabled","true");aU.setAttribute("disabled","true");Y.ajax({url:window.contextPath+"/api/user/me/channels",type:"POST",data:{title:aS},success:function(aV){aU.setAttribute("style","display: none");if(!aV.results.contains){aV.results.contains={};aV.results.contains[bx.id.toString()]=false}if(aS!==aV.results.title){aT.value=aV.results.title}aJ.push(aV.results);aJ.sort(aE);aP(aT.value,aJ)},error:function(aV){aN(aV)},complete:function(){aT.removeAttribute("disabled");aU.removeAttribute("disabled")}})}Y("body").on("vclick","#addChannel",aM);Y("body").on("change",".addToChannel",function(aS){var aT=aS.target,aU=aT.id;aT.setAttribute("disabled","true");var aV=document.getElementById("progress-"+aU);if(document.addEventListener){aV.setAttribute("style","width: 25%")}if(aS.target.checked){Y.ajax({url:window.contextPath+"/api/channel/"+aU+"/content",data:{itemIds:bx.id},xhr:function(){var aX=Y.ajaxSettings.xhr();function aW(aZ){if(aZ.lengthComputable){var aY=aZ.loaded/aZ.total;aV.setAttribute("style","width: "+aY*100+"%")}}if(aX.addEventListener){aX.addEventListener("progress",aW,false)}return aX},type:"POST",success:function(){aC(aU,aJ)},error:function(aW){aN(aW)},complete:function(){aT.removeAttribute("disabled");if(aV.classList){aV.classList.add("progressDone");setTimeout(function(){aV.removeAttribute("style");aV.classList.remove("progressDone")},400)}}})}else{Y.ajax({url:window.contextPath+"/api/channel/"+aU+"/content?itemIds="+bx.id,type:"DELETE",xhr:function(){var aX=Y.ajaxSettings.xhr();function aW(aZ){if(aZ.lengthComputable){var aY=aZ.loaded/aZ.total;aV.setAttribute("style","width: "+aY*100+"%")}}if(aX.addEventListener){aX.addEventListener("progress",aW,false)}return aX},success:function(){aD(aU,aJ)},error:function(aW){aN(aW)},complete:function(){aT.removeAttribute("disabled");if(aV.classList){aV.classList.add("progressDone");setTimeout(function(){aV.removeAttribute("style");aV.classList.remove("progressDone")},400)}}})}});Y("body").on("keyup","#channelSearch",function(aS){document.getElementById("channelError").setAttribute("style","display: none");if(aS.keyCode===13){aM(aS)}else{if(aS.keyCode===27){aQ()}else{aP(aS.target.value,aJ)}}});Y("body").on("vclick","#closeAddChannel",aQ);if(!document.documentElement.hasOwnProperty("ontouchstart")){Y(window).resize(aQ)}Y(document).on("vclick",function(aS){if(aS.target.className.toLowerCase().indexOf("post")===-1&&!Y(aS.target).closest("div.popover").length&&Y("div.popover").is(":visible")){aQ()}})}})}};if(bx.id){bm();var bn=function(aC){return function(aE){aE.stopPropagation();var aD;if(aC==="Share"){aD=av}else{if(aC==="Touch"){aD=x}else{if(aC==="Fullscreen"){aD=au}}}aD(bt,bb,bx,bc);return false}};if(L&&L.extraSidebarIcons&&L.extraSidebarIcons.indexOf("Fullscreen")!==-1){bt.find(".tlMenuFullscreen").parent().unbind("vclick").bind("vclick",bn("Fullscreen"))}var a9,bg;for(a9=0;a9<a.length;a9++){bg=a[a9];if(!bu[bg.toLowerCase()]||a8){bt.find(".tlMenu"+bg).parent().unbind("vclick").bind("vclick",bn(bg));if(bg==="Touch"){E([bx.touched,bx.id,bx.touches])}}else{bt.find(".tlMenuItem"+bg).hide()}}if(bd||bo||bx.visibility==="PRIVATE"){bq()}}else{bq()}aw(bt,bb,bx);if(!L.manualViewStats){M.installTracker(bx,bt)}if(!L.disableContextMenu&&!L.disableMenuItems){y(bt,bc,bu)}if(a8){bt.addClass("tlThinglinkSite")}var bw=function(aC){return function(aE){var aD=Y(this);if(aE.type==="touchend"){aD.click();return false}if(aE.type==="mouseenter"){aD.addClass(aC)}else{aD.removeClass(aC)}}};Y(".tlSidebar .tlMenuItem").bind("mouseenter mouseleave touchend",bw("tlMenuItemHover"));if(bx&&ar.no(bx.error)){R.attach(bt);if(a6){bt.find(".tlMenuItemTouch").hide()}if(L.makeSidebarSticky){Y(".tlSidebar").show()}var br=function(aF){var aD=["contentUrl","icon","thingUrl"],aE,aC;for(aE=0;aE<aD.length;aE++){aC=aD[aE];if(aF[aC]&&aF[aC].substring(0,2)==="//"){aF[aC]=ar.getProtocol()+aF[aC]}}};var bf=bx.things,bv,bj;if(bf!==undefined){var be=0;var bp=function(aC){Q.resizeNubbinsForThing(aC.id,aC.nubbin);be=be+1;if(L.nubbinSneakPeek&&(be===bf.length)){H(bt);t(bt)}else{if(L.makeNubbinsSticky){setTimeout(function(){ag.variateOpacity("show",bt.find("div.nubbin"),1)},1)}}};var bk;for(bv=0;bv<bf.length;bv++){bj=bf[bv];br(bj);if(Y.type(bj.styles)!="object"){bk="";try{bk=bj.styles?JSON.parse(bj.styles):{}}catch(a5){}bj.styles=Y.extend(ad.defaultCustomStyles(),bk)}u(bt,bb,bj,bc,a6,bp)}}k(bt,bf)}}catch(bl){console.log(bl)}}function p(aA){if(aA.lang){L.setRequestLanguage(aA.lang)}if(aA.owner===true||aA.owner===false){ai.setUserLoggedIn(true)}ao.getQueriedImages().each(function(){var aL=Y(this);var aK=N.getSceneUrl(this);var aM=aA[r(aL).id];if(!aM){aM=aA[aK]}if(!aM){aM=aA[ar.cleanURIEncoding(aK)]}if(!aM){aM=aA[encodeURIComponent(aK)]}if(!aM){try{aM=aA[decodeURIComponent(aK)]}catch(aQ){}}if(!aM){aM=null}var aN=(aM&&aM.things&&aM.things.length!==0);var aO=(aM&&aL.tlImage("isAlwaysThinglink"));if(aA.owner||(aM&&aM.allowEdit)||aN||aO){W.triggerEvent("tlScenesFound");aL.parents(".tlImageContainer").find(".tlMenu").show();aL.tlImage("sceneData",aM);if(aL.tlImage("hasSize")){B(aL)}else{aL.load(function(){B(aL)})}}else{if(aM){var aP=aL.parents(".tlImageContainer");aP.find(".tlMenu, .tlSidebar").hide(200);aP.unbind("mouseenter mouseleave");var aR={w:0,h:0};if(aL.tlImage("hasSize")){aR=am.getDimensions(aL)}aP.css({cssText:"width:"+aR.w+"px!important; height:"+aR.h+"px!important;"})}}})}function b(){var aA=window.location.href.replace(/^[^\#]+\#?/,"");if(aA.match(/tl[\-\=]/)){aA=aA.slice(3);Y("img").each(function(){var aE=X.generateImageHash(this);if(aE==aA){var aF=L.activateImage;if(aF){aF(Y(this))}return false}})}}function q(){Y.extend(Y.easing,{easeOutCubic:function(aI,aH,aJ,aA,aG){return aA*((aH=aH/aG-1)*aH*aH+1)+aJ}})}function I(aE){if(aE.tlImage("isOk")){ao.addQueriedImage(aE);var aF=r(aE).id;if(!aF){if(window.__tlid){O.rebuild(N.getSceneUrl(aE))}else{var aA=aa.getCacheSceneId(N.getSceneUrl(aE));if(aA){aE.attr("tl-scene-id",aA);O.rebuild(aA)}}}else{O.rebuild(aF)}}}function v(aA){var aE=Y(aA);var aF=aE.closest(".tlImageContainer");if(aF.length>0){O.removeTags(aF);aE.removeAttr("tl-scene-id");aF.find(".tlEmbedPopup, .tlSharePopup").remove()}I(aE)}var w=function(aA,aI,aL){if(!aA){return}var aM=aA.attr("tl-thing-id"),aJ=Y("img[tl-scene-id="+aI+"]").first(),aN=F(aM,aJ.tlImage("sceneData"));var aK=function(aC){M.logClick(aM,aI,aJ,aC)};if(aL){aL=decodeURIComponent(aL);al.relocateOrOpen(aL,aK,aN,window.top===window.self)}else{aK()}};var F=function(aA,aF){var aE;if(aF){aF.things.map(function(aC){if(aC.id===aA){aE=aC}})}return aE};var l=function(aA,aI){if(!aA){return}var aJ=aA.attr("tl-thing-id");var aG=Y("#tl-a-"+aJ).find("iframe");var aH=aA.data("thing").styles||aA.data("tlStyles")||{};aH=ar.extend(ad.defaultCustomStyles(),aH);ad.sendStylesToIframe(aG,aH,aI)};var i=function(){Y(".tlSharePopup").hide()};var o=function(aA,aI){if(!aA){return}aI=decodeURIComponent(aI);var aH=ac.getThingPieces(aA);var aJ=aH.bubble.data("bubbledata");var aG=aJ.rtid;ah.registerThing(aI,aG)};var ax=function(aA,aE){if(!aA){return}if(aE=="true"){aE=true}else{if(aE=="false"){aE=false}else{aE=null}}var aF=aA.attr("tl-thing-id");Y("#tl-a-"+aF).toggleClass("tlPlaying tlSticky",aE)};var e=function(aA,aD){if(!aA){return}aD=decodeURIComponent(aD);if(/^http:\/\//.test(aD)){aA.attr("href",aD)}else{aA.removeAttr("href")}};var f=function(a1,aV,aY){if(!a1){return}var a0=parseInt(aV,10);var aS=parseInt(aY,10);if(isNaN(a0)&&isNaN(aS)){return}var aR=a1.attr("tl-thing-id");var aP=Y("#tl-a-"+aR).find(".tlThingContent");var aZ=aP.find(".tlSpinner");var aT=aP.find("iframe");var aW=S.parseCssText(aT.attr("style"),true,true);var aQ=aW["max-width"];var aX=aW["max-height"];if(a0>0){if(a0<50){a0=50}else{if(a0>800){a0=800}}if(aQ&&a0>aQ){a0=aQ}aW.width=a0+"px;";var aA=S.parseCssText(aP.attr("style"),false,false);aA.width=a0+"px !important";aP.css({cssText:ar.mapToCssText(aA)})}else{aW.width=aT.width()+"px;"}if(aS>0){if(aS<20){aS=20}else{if(aS>600){aS=600}}if(aX&&aS>aX){aS=aX}aW.height=aS+"px;"}else{aW.height=aT.height()+"px;"}aW["max-width"]=aW["max-width"]+"px";aW["max-height"]=aW["max-height"]+"px";var aU="";if(aW.opacity){aU+=" opacity: "+aW.opacity+";";aW.opacity=null}aZ.css({cssText:ar.mapToCssText(aW,true)});aT.css({cssText:ar.mapToCssText(aW,true)+aU});if(a1.hasClass("hovered")){ap(a1)}};var aB=function(aA){if(O.editorPopup){O.editorPopup.close();O.editorPopup=null}Y("#thinglinkCBClose").click();if(O.editorCloseCallback){O.editorCloseCallback.call(this,aA)}};function C(aG){var aA=aG[0];var aH=aG[1];var aF=aG[2];switch(aA){case"resize":f(aH,aF[0],aF[1]);break;case"setSticky":ax(aH,aF[0]);break;case"closeEditor":aB(aF[0]);break;case"setNubbinClickUrl":e(aH,aF[0]);break;case"changeTagContentUrl":o(aH,aF[0]);break;case"touchLogin":ai.touchLoginCallback(null,aF[0]);break;case"sharingLinkOpened":i(aF[0],aF[1]);break;case"tagClick":w(aH,aF[0],aF[1]);break;case"getStyles":l(aH,aF[0]);break;default:console.warn("Unknown postmessage command "+aA)}}function d(aF){if(O.status!="loadcomplete"){var aH=aF.parent().parent();O.removeTags(aH);aH.find(".tlMenuItemShare,.tlMenuItemTouch").show();var aG=aF.attr("tl-scene-id");var aA=N.getSceneUrl(aF);if(!aG){O.rebuild(aA)}else{O.rebuild(aG)}}}function A(){var aI=true;var aH=0;var aA=ar.isTouchDevice?"tlTouchDevice":"";var aG=Y("#tlTagContainer");if(aG.length===0){aG=Y('<div id="tlTagContainer" class="'+aA+'"/>').appendTo("body")}else{aG.addClass(aA)}var aJ={tagify:function(aS){var aU=Y.extend({complete:null,everyLink:false,maxAge:null},aS);var aE=function(){aH++;return aH};var aW=function(aL,aK){Y.getJSON(L.getApiBaseUrl()+"/api/resolvetag?client_id="+L.clientId+"&url="+aL.map(encodeURIComponent).join("|")+(aU.maxAge?"&maxAge="+aU.maxAge:"")+(L.isThinglinkSite()?"":"&callback=?"),aK)};var aT=function(aL,aN,aM){var aK=((aN!==undefined)?aN.content:{});if(Y.isEmptyObject(aK)&&aL.attr("href")!==""){aK.title=aL[0].hostname;aK.thingUrl=aL.attr("href")}aK.id=aL.attr("tl-thing-id");aK.productName=aL.attr("title")||"";var aQ=aL.attr("data-tagopacity");aK.opacity=(aQ==null||aQ.length===0)?"1.0":parseFloat(aQ);aL.data("thing",aK);if(!aM&&ac.getThingPieces(aL).nubbin[0].offsetLeft>0){var aO=al.render(aK,null,ap);D(aO);G(aO,aK.styles,ar.getSourceDomain(aK.contentUrl));var aP=aO.data("bubbledata").rtid;aL.addClass("rtid-"+aP);aG.append(aO)}T.attach(aL)};var aX=function(aK){aK.removeAttr("tl-thing-id").removeClass("tagx");aK[0].className=aK[0].className.replace(/tl-a-000\d+ ?/,"")};var aF=function(aN,aO){var aQ,aK,aM=[];var aP,aL;for(aQ in aO){if(aO.hasOwnProperty(aQ)){aP=aO[aQ];for(aK=0;aK<aP.length;aK++){if(!Y.isEmptyObject(aN[aQ])||aU.everyTag){aL=(aK!==0);aT(aP[aK],aN[aQ],aL);aM.push(aP[aK])}else{aX(aP[aK])}}}}if(typeof aU.complete=="function"){aU.complete.call(document,aM)}};if(aI){aI=false;Z.injectEmbedCSS()}var aR=this.filter("a[href],a[tl-tagify-url]");var aV={};var aC=[];aR.each(function(){var aL=Y(this);var aM=aL.attr("tl-tagify-url");var aK=aM||(aL.attr("href")!=null?this.href:"#");var aN;if(aU.everyTag||(aK.length>5&&aK.substring(0,1)!="#")){if(aV[aK]){aN=aV[aK][0].attr("tl-thing-id");aV[aK].push(aL)}else{aN="000"+aE();aV[aK]=[aL];aC.push(aK)}aL.addClass("tl-a-"+aN).addClass("tagx").attr("tl-thing-id",aN)}});var aD=function(aK){aF(aK,aV)};if(aR.length>0){aW(aC,aD)}},isImageTag:function(){var aC=this.attr("tl-thing-id");if(aC.substring(0,3)=="000"){return false}return true},reposition:function(){this.each(function(){ap(Y(this))});return this},makeNewHair:function(aC,aE,aD){G(aC,aE,aD)},setStyles:function(aC){this.data("tl-styles",aC);this.each(function(){var aE=Y(this);var aD=aE.attr("tl-thing-id");var aL=Y("#tl-a-"+aD);var aF="";if(aE.data("thing")){aF=ar.getSourceDomain(aE.data("thing").contentUrl)}aJ.makeNewHair(aL,aC,aF)})},getStyles:function(){return this.data("tl-styles")},getRawDescription:function(){return this.data("tl-raw-description")},setDescription:function(aC,aD){this.data("tl-raw-description",aC);aC=aC.replace(/\n\n+/g,"\n\n");aC=aC.replace(/\n/g,"<br>");this.each(function(){var aE=Y(this);var aN=aE.attr("tl-thing-id");var aF=Y("#tl-a-"+aN);if(aF.hasClass("tlThemeIframeThing")){if(aF.find(".tlIframeDescription").length===0){if(aC.length>0){aF.find(".tlThingContent").prepend('<div class="tlIframeDescription" /><hr class="tlHrDescription" />')}}else{if(aC===""){aF.find(".tlIframeDescription").remove();aF.find(".tlHrDescription").remove()}}aF.find(".tlIframeDescription").html(aC)}else{if(aF.hasClass("tlThemeRichThing")){aF.find(".tlThingTitle").html(aC)}else{var aO=aF.find(".tlThingContent");aO.html(aC);al.setBubbleTagTextStyle(aF,aC);if(aD.length>0){if(aC.length>0){aO.append("<br>")}var aP=Y('<a class="tlThingLink" href="'+aD+'"></a>');aP.text(aP[0].hostname);aO.append(aP)}}}});return this},open:function(aC){this.each(function(){var aD=Y(this);if(!aD.hasClass("hovered")){var aE=aD.attr("tl-thing-id");Y("#tl-a-"+aE).addClass(aC?"tlSticky":"");aD.mouseenter();ap(aD)}});return this},close:function(){this.each(function(){var aD=Y(this);var aC=aD.attr("tl-thing-id");aD.removeClass("tlSticky mouseover linked hovered");if(Y("#tl-a-"+aC).hide().hasClass("tlPlaying")){Y("#tl-a-"+aC).find(".tlThingClose").click()}});return this},isOpen:function(){return this.hasClass("hovered")}};Y.fn.tlTag=function(aC){return aJ[aC].apply(this,Array.prototype.slice.call(arguments,1))}}function h(){ak.finalFetchCompleteCallback(function(){ae.setStatus("tagfetchcomplete")});ak.dataReceivedCallback(p);ah.init();ah.addListener("postMessageCommand",C);ai.addListener("updateSceneTouchStatus",E);aj.addListener("editorClose",d);A();var aD=function(aC){I(Y(aC))};var aA=function(aC){v(Y(aC))};an.track("img","src",aD,aA);Y(window).bind("resize",aq({after:function(){O.reposition()},threshold:200,allowPropagation:true}));q();b();s()}h()}());return O});tlRequire.define("measure",["jQuery","util"],function(f,e){var d={limitSizeHelper:function(n,o,a){var c=18;var l=n[1]-n[0];if(l<c){var p=(c-l)/2;n[0]=n[0]-p;n[1]=n[1]+p;var b=(o-n[0]);if(b>0){n[0]=o;n[1]=n[1]+b}var m=(n[1]-a);if(m>0){n[0]=n[0]-m;n[1]=a}}return n},getThingRect:function(b,m){var n=f(b);if(n.length){var l=d.getExtent(n);var c=n.width();var o=n.height();var p=[Math.round(c*m.x1),Math.round(c*m.x2)];var a=[Math.round(o*m.y1),Math.round(o*m.y2)];p=d.limitSizeHelper(p,0,c);a=d.limitSizeHelper(a,0,o);return{t:a[0]+l.t,l:p[0]+l.l,w:(p[1]-p[0]),h:(a[1]-a[0])}}else{return{t:0,l:0,w:0,h:0}}},getCoordinates:function(b){var i=f(b);if(i.length){var c=d.getExtent(i);var j=c.l;var a=c.t;return{x:j,y:a}}else{return{x:0,y:0}}},getDimensions:function(a){var j=f(a);var k={w:0,h:0,rawWidth:0,rawHeight:0};if(j.length){var b=d.getExtent(j);k=e.extend(b);k.rawWidth=j.width();k.rawHeight=j.height();var l=k.rawWidth+b.l+b.r;var c=k.rawHeight+b.t+b.b;k.w=l;k.h=c}return k},getExtent:function(w,a){var x=f(w);if(!a){a=["margin","padding","border"]}var c=["box-sizing","border-left-color","border-top-color","border-right-color","border-bottom-color","border-left-style","border-top-style","border-right-style","border-bottom-style","border-left-width","border-top-width","border-right-width","border-bottom-width","padding-left","padding-top","padding-right","padding-bottom","background-color","left","top","right","bottom"];var r={l:0,t:0,r:0,b:0},v,u,q;if(x.length){for(v=0;v<c.length;v++){r[c[v]]=x.css(c[v])||0}for(v=0;v<a.length;v++){u=a[v];q=(u=="border")?"-width":"";var t=u+"-left"+q;var i=u+"-top"+q;var s=u+"-right"+q;var b=u+"-bottom"+q;r[t]=parseInt(x.css(t),10)||0;r[i]=parseInt(x.css(i),10)||0;r[s]=parseInt(x.css(s),10)||0;r[b]=parseInt(x.css(b),10)||0;r.l+=r[t];r.t+=r[i];r.r+=r[s];r.b+=r[b]}}return r}};return d});tlRequire.define("namespace",[],function(){if(window.__thinglink===undefined){window.__thinglink={}}if(window.__tlconfig!==undefined){window.__thinglink.config=window.__tlconfig}return window.__thinglink});tlRequire.define("nodeChangeTracker",["browserFeats"],function(h){function g(c,a,b){return c.each(function(){var d=this;var e=d[a];var l=function(k){if(k&&k.attrName&&k.attrName!=a){return}var p=d[a];if(p!=e){var o=e;e=p;b(d,p,o)}};if(typeof(this.onpropertychange)==="object"){$tlJQ(this).unbind("propertychange").bind("propertychange",l)}else{if(h.hasDomAttrModified()){$tlJQ(this).unbind("DOMAttrModified").bind("DOMAttrModified",l)}}})}function f(e,a,b,c){if(!c){c=1000}var d=function(){$tlJQ(e).each(function(){var n=$tlJQ(this);var o=this[a];var p=n.data("store-value-"+a);if(!p){n.data("store-value-"+a,o)}else{if(o!=p){n.data("store-value-"+a,o);b(this,o,p)}}})};d();setInterval(d,c)}function i(b,e,d,a,c){if(!c){c=1000}var l=function(k){setTimeout(function(){var n=$tlJQ(k);if(n.closest(".tlImageContainer").length!==0&&!$tlJQ._data(n.closest(".tlImageContainer").get(0),"events")){a(k)}else{if(!n.tlImage("isInspectedByThinglink")&&n.tlImage("isOk")){if(n.tlImage("hasSize")){e(k)}else{n.load(function(){e(k)})}}}if(d){d(k)}},1)};if(h.hasDomNodeInserted()){$tlJQ(document).bind("DOMNodeInserted",function(k){var n=$tlJQ(k.target).find(b).each(function(){l(this)});if(k.target.nodeName.toLowerCase()===b){l(k.target)}})}else{setInterval(function(){$tlJQ(b).each(function(){l(this)})},c)}}function j(a,c,d,b){if(h.hasDomAttrModified()||typeof(document.body.onpropertychange)==="object"){g($tlJQ(a),c,b);i(a,d,function(e){g($tlJQ(e),c,b)},b)}else{f(a,c,b);i(a,d,null,b)}}return{track:j}});tlRequire.define("nubbinIconSizeManager",["jQuery","cssUtil"],function(f,d){var e=(function(){var c={};var a=function(g,o,p){var q=0;var h=0;var r=false;if(c[g]){q=c[g].w;h=c[g].h}if(p.width>q){q=p.width;r=true}if(p.height>h){h=p.height;r=true}if(r){c[g]={w:q,h:h};b(f(".tagx.nubbin-"+g),g,q,h)}};var b=function(g,m,n,h){g.each(function(){var s=f(this);var t=d.parseCssText(s.attr("style"),true,true);var k=false;if(n>t.width){k=true;var u=parseInt(t.left,10)+t.width/2;t.left=u-n/2;t.width=n}if(h>t.height){k=true;var v=parseInt(t.top,10)+t.height/2;t.top=v-h/2;t.height=h}if(k){var l={l:t.left,t:t.top,w:t.width,h:t.height};d.repositionElement(l,s[0])}})};var j=function(){var g;for(g in c){if(c.hasOwnProperty(g)){b(f(".tagx.nubbin-"+g),g,c[g].w,c[g].h)}}};var i=function(h,l){var g=f(".tagx.tl-a-"+h);if(c[l]!==undefined){b(g,l,c[l].w,c[l].h)}};return{registerIcon:a,resizeAllNubbinsIfTooSmall:j,resizeNubbinsForThing:i}}());return e});tlRequire.define("nubbinRenderer",["nubbinIconSizeManager","config","util","cssUtil"],function(l,g,h,j){var k=(function(){var b=["plain","hover","hoverlink","highlight"];var c={};function a(e){return g.getCDNUrl()+"/api/nubbin/"+e}function d(p,e){if(p){var f=a(p)+"/"+e;var o=new Image();o.onload=function(){l.registerIcon(p,e,this)};o.src=f;return"style=\"background-image: url('"+f+"') !important;\" "}else{return""}}return function(p){if(!c[p]){var f={};var o;for(o=0;o<b.length;o++){var e=b[o];f[e]=d(p,e)}c[p]=f}return c[p]}}());function i(f,d,r){var u="tl-a-"+d.id;var v=d.nubbin?"nubbin-"+d.nubbin+" ":"";var e=$tlJQ('<div class="tagx '+v+u+'" tl-thing-id="'+d.id+'"></div>');j.repositionElement(f,e[0]);var c=k(d.nubbin);var s=d.thingUrl||"";e.attr("href",s);var t;if(s){t=c.hoverlink}else{t=c.hover}var a=$tlJQ('<div class="nubbin"><div class="nubbinGlow" '+c.highlight+'></div><div class="nubbinIcon" '+c.plain+'></div><div class="nubbinHoverIcon" '+t+"></div></div>");if(!!d.pinned){a.addClass("pinned")}else{a.addClass("unpinned")}a.appendTo(e);var b;if(r){b=$tlJQ('<div id="'+r+'" class="tlThingContainer"></div>')}else{b=$tlJQ('<div class="tlThingContainer" ></div>')}e.appendTo(b);return b}return{render:i}});tlRequire.define("popup",["config","txt"],function(d,e){function f(s,q,a,r){var t=$tlJQ(a,s).first();if(t.length===0){var n=$tlJQ.trim(a.replace(/\./g," "));t=$tlJQ('<div class="'+n+' tlPopup"></div>');var b=$tlJQ('<a href="#" class="tlCloseBtn"></a>');var c=$tlJQ('<div class="tlPopupInner"></div>');b.bind("vmouseup",function(g){t.hide();return false});if(r){r(c)}if(d.showPoweredBy&&!q.tlImage("isWhitelabel")){var o=d.address+"/?buttonSource="+a;var p=$tlJQ('<a href="'+o+'" class="thinglinkInfo">'+e("poweredBy")+"</a>");p.click(function(g){window.open(o)});c.append(p)}t.append(c);t.append(b);s.append(t);t.click(function(h){var g=$tlJQ(h.target);if(g.hasClass("shareIframeHelpIcon")&&g.attr("href").length>0){g.click()}h.stopPropagation();return false});$tlJQ("body").click(function(g){if(t.css("display")!=="none"){t.fadeOut(250)}})}s.find(".tlPopup").hide();t.show();return false}return{setup:f}});tlRequire.define("positionThing",["jQuery","positionThingAlg","config","util","cssUtil","measure","sceneUtil"],function(k,m,i,j,l,n,o){function p(am){var aw=am.attr("tl-thing-id");var at=k("#tl-a-"+aw);var Z=at.find(".tlArrow");var ae=13;var ad=at.height();var az=Math.round(((am.height()/2)-ad-ae));var V=am.closest(".tlImageContainer");var W;if(i.hOverflow!==null){W=i.hOverflow}else{W=true}var ac;if(i.vOverflow!==null){ac=i.vOverflow}else{ac=true}var av=am.offset(),h=k(document.body);var X={left:0,top:0};if(k.inArray(h.css("position"),["absolute","relative"])!==-1){X=j.getOffsetRect(document.body);av.left=av.left-X.left;av.top=av.top-X.top}var a=at.find(".tlThingClose").length>0?17:5;var c=5;var aA=function(){var v;var q;if(ac===false){var x=parseInt(am.css("top").replace("px",""),10);v=x+az-a;var r=V.height();var s=r-x-am.height();q=s+az-c}else{var t=k(window).scrollTop()-X.top;var w=k(window).height()+t;v=av.top+az-a-t;var u=w-av.top-am.height();q=u+az-c}return{t:v,b:q}};var ah=aA();var af=at.find(".tlUpArrow");var aa=at.find(".tlCenterArrow");if(ah.t<0){Z.css("cssText","display:none;");if(ah.b>0){az=Math.round((am.height()/2)+13);Z=af;if(Z.length===0){Z=k('<div class="tlUpArrow"></div>');at.prepend(Z)}}else{af.css("cssText","display:none;");az=az-ah.t;Z=aa;if(Z.length===0){Z=k('<div class="tlCenterArrow"></div>');k(".tlThingContent",at).before(Z)}}}else{af.css("cssText","display: none;")}var ai=Z[0]?l.parseCssText(Z[0].style.cssText):{};ai.display="";Z.css("cssText","");var d=at[0]?l.parseCssText(at[0].style.cssText,true):{};var au="min-width: "+d["min-width"]+"px !important; z-index: "+at.css("z-index")+"; display: block;";if(d["max-width"]){au=au+"max-width: "+d["max-width"]+"px !important;"}if(d.opacity){au=au+"opacity: "+d.opacity+";"}if(d.visibility){au=au+"visibility: "+d.visibility+";"}var f=n.getDimensions(at).w;var ay=(window.ActiveXObject||"ActiveXObject" in window)?"width: "+f.toString()+"px !important;":"";var ab=am.width();var ax=Math.round((ab-f)/2);var g=parseInt(am.css("left").replace("px",""),10);if(V.css("box-sizing")==="content-box"){var Y=n.getExtent(V[0]);var b=Y["padding-left"];g=g-b}var aj=V.width();var ao=5;var ap=at.find(".tlThingClose").length>0?17:5;var an=g+ax-ao;var e=aj-ap-(g+ax+f);var ak=0;var aq;if(W===false&&an<0&&e>0){ak=-an}else{if(W===false&&e<0&&an>0){ak=e}else{if(window.ActiveXObject||"ActiveXObject" in window){Z.css("cssText",ay)}}}af=at.find(".tlUpArrow");if(af.length&&af.css("display")!="none"){at.addClass("tlUpArrowInside")}else{at.removeClass("tlUpArrowInside")}at.css("cssText","display:none !important;");var al=function(){var q=k(window).scrollLeft()-X.left;var s=j.getWindowSize().w+q;var t=(av.left+ax+ak);var r=t-ao-q;var u=s-(t+f+ap);return{l:r,r:u}};var ag=al();if((ag.l+ag.r)<0){ao-=5;ap-=5;ag=al()}ak=m.applyHorizontalWindowLimitsToDisplacement(ak,ag,X,at.hasClass("tlPlaying"));ai.left=(-ak)+"px !important;";if(ak!==0){ax=ax+ak}if(Z.length>0){Z.css("cssText",Z[0].style.cssText+j.mapToCssText(ai))}var ar={left:0,top:0};if((o.isThinglinkSceneView())||(k("#tlTagContainer").closest(".tlFullscreen").length>0)){ar=k("#tlTagContainer").offset()}at.css("cssText",au+"top: "+(av.top+az-ar.top).toString()+"px !important; left: "+(av.left+ax-ar.left).toString()+"px !important;")}return p});tlRequire.define("positionThingAlg",["util"],function(c){function d(x,r,p,u){var o=x;if(r.l<0&&r.r>0){o=o-r.l}else{if(r.r<0&&u){var t=0;if(r.l<r.r){t=r.r-r.l;if(t>5){t=5}}r.r-=t;o=o+r.r}else{if(r.r<0&&r.l>0){o=o+r.r}else{if(r.r<0&&r.l<0){var q=$tlJQ(window).scrollLeft()-p.left;var v=c.getWindowSize().w+q;var b=-p.left;var s=$tlJQ(window).width()+b;var a=q+r.l-b;var w=(s-v)+r.r;if(w<0){o=o+w}else{if(a<0){o=o-a}}}}}}return o}return{applyHorizontalWindowLimitsToDisplacement:d}});tlRequire.define("postMessageManager",["namespace","jQueryPostMessage","EventDispatcher","config","util"],function(F,t,H,G,B){var r=F.postMessageManager;if(typeof r==="undefined"||typeof r.addListener==="undefined"){var D={};var s={};var w=function(){D={};s={}};var v=function(c,b){var d=B.getSourceDomain(c);s[d]=true;if(!b){var a=false;while(!a){b=(" "+Math.random()).substr(3);if($tlJQ("#"+b).length===0){a=true}}}D[b]=d;return b};var x=function(a){if(s[a]){return true}return false};var A=function(a){return a.replace(/^https?:/,"")};var E=function(f){var a=f.data;if(typeof(a)!=="string"){return}var c=a.split("/");var e=c[0];var i=c[1];var h=c.slice(2);var d=f.origin;if(d){var g=D[e];if(!g||A(d)!==A(g)){return}}var b=[i,C(e),h];r.trigger("postMessageCommand",b)};var C=function(b){var c=$tlJQ("#"+b);var a;if(c.length===0){a=$tlJQ(".rtid-"+b)}else{a=c.find(".tagx")}if(a.length===0){return}return a};var y=function(){$tlJQ.receiveMessage(E,x)};var z=function(e){var a=window.location.href.split("#")[0];var d="";var b="";var f="";try{d=v(e);b=encodeURIComponent(a);f="#rtid="+d+"&target="+b;if(!!G.referer){f+="&referer="+encodeURIComponent(G.referer)}if(G.preventNavigation){f+="&preventNavigation=true"}if(e.indexOf("#")>0){f="&"+f.substring(1)}}catch(c){}return{rtid:d,target:b,srcPmParams:f}};var u=function(){};u.prototype=new H();u.prototype.init=y;u.prototype.reset=w;u.prototype.prepareAndGetParameters=z;u.prototype.registerThing=v;r=new u();F.postMessageManager=r}return r});tlRequire.define("sceneCache",[],function(){var d={};function e(a,b){d[a]=b}function f(a){return d[a]}return{getCacheSceneId:f,setCacheSceneId:e}});tlRequire.define("sceneUtil",["jQuery","util"],function(k,o){function r(a){return k("img[tl-scene-id="+a+"]").closest(".tlImageContainer")}function p(a){return a.find("img").attr("tl-scene-id")}function l(a){return r(a).find(".tlMenuItem").hasClass("tlUntouch")}function m(a){return r(a).find(".tlMenuLabelTouch").data("tlTouchCount")}function j(b,d){var c=k(b);var a=c[0].src.replace(/#.*$/,"");if(d){a=a+";"+d}return a}function q(){return k("body").hasClass("permaScene")||k("body").hasClass("permaVideo")}function n(){k(".tlThingClose").mouseup()}return{findImageContainer:r,getContainerSceneId:p,isSceneTouched:l,getSceneTouchCount:m,isThinglinkSceneView:q,getSceneUrl:j,closeAllStickyTags:n}});tlRequire.define("sharePopup",["util","config","postMessageManager","popup","hashing","sceneUtil","measure"],function(n,q,k,s,r,o,t){function m(a){return q.sslAddress+"/scene/"+a}function l(e){var a=e.tlImage("sceneData");var i=e.closest(".tlImageContainer");if(!e){return}var f=e.attr("tl-scene-id");var c=r.generateImageHash(e[0]);var g=encodeURIComponent(m(f));var d;var h=$tlJQ('head meta[name="identifier-URL"]').attr("content");if(!!h){d=h}if(q.isThinglinkSite()&&!d){d=g}else{if(!d){d=window.location.href}var b=d.indexOf("#");if(b===-1){d=encodeURIComponent(d)+"%23tl-"+c}else{if(b==d.length-1||d.substring(b,b+4)==="#tl-"){d=encodeURIComponent(d.substring(0,b))+"%23tl-"+c}else{d=encodeURIComponent(d)}}}return d}function p(x,b,i){o.closeAllStickyTags();var d=$tlJQ("#tlOverlayContainer");if(d.length===0){d=$tlJQ('<div id="tlOverlayContainer"/>').appendTo("body")}var e=".tlShareIframePopup.tl-item-"+i.id;var f=$tlJQ(e,d);if(f.length>0){f.show()}else{s.setup(d,b,".tlShareIframePopup.tlSharePopup.tl-item-"+i.id,function(H){var J=q.getBaseUrl()+"/embed/share/"+i.id;var F=k.prepareAndGetParameters(J).srcPmParams;var v=n.getDomain(window.location.href);var G=v?r.adler32(v):"";var I=$tlJQ(document).innerHeight();var u=Math.min(I-50,400);var E=$tlJQ('<iframe id="tlSharingFrame" src="'+J+"?shareUrl="+l(b)+"&domainHash="+G+F+'" type="text/html" height="'+u+'px" + frameBorder="0"></iframe>');H.append(E)})}if(f.length===0){f=$tlJQ(e,d)}var h=t.getDimensions(b).w;var a=b.offset();var j=t.getDimensions(f).w;var c=parseInt(a.left+(h/2)-(j/2),10);var g=$tlJQ(window).width();if(c<0){c=0}else{if(c-j>g){c=g-j}}var w=a.top<13?13:a.top;f.css("cssText",f[0].style.cssText+"; left: "+c+"px !important; top: "+w+"px !important;")}return{setup:p}});tlRequire.define("statusManager",["namespace","config","callbackManager"],function(g,h,e){function f(a){g.status=a;if(h.eventManager&&h.eventManager.trigger){h.eventManager.trigger("statusChanged",a)}e.triggerEvent(a)}return{setStatus:f}});tlRequire.define("tagEventHandlers",["jQuery","callbackManager","eventDebounce","positionThing","actionLogger","imageEventHandlers","config","jUtil","util","cssUtil","customization"],function(z,E,K,L,C,x,u,A,N,D,H){var G=N.isTouchDevice;var v=function(b,c,e){var a=b.find(".thinglinkImage").first();var d=a.attr("tl-scene-id");C.logClick(c,d,a,e)},M=function(b,c){var a=b.find(".thinglinkImage").first();var d=a.attr("tl-scene-id");C.logHover(c,d,a)},y=function(b,c){var a=b.find(".thinglinkImage").first();var d=a.attr("tl-scene-id");C.logHoverEnd(c,d,a)};var J=function(f,g,b,c){var d;if(f.nubbin.tlTag("isImageTag")){d=function(h){v(c,b.id,h)}}var a=(u.preventNavigation||b.openlink==="NONE")&&!(b.theme=="rich"&&b.contentUrl&&f.bubble.find(".tlSpinner").length===0);if(!a&&b.theme=="iframe"){a=!f.bubble.hasClass("iframeLoaded")}var e=f.nubbin.attr("href");if(!a){a=!e}if(!a){g.clickHandler.call(this,e,f.nubbin,d);return true}if(d){d()}return false},F=function(a){a=a||A.getThingPieces(this);if(!a.bubble.hasClass("tlPlaying")){setTimeout(function(){if(!a.bubble.hasClass("mouseover")&&!a.nubbin.hasClass("mouseover")){if(a.nubbin.hasClass("hovered")){var c=a.nubbin.attr("tl-thing-id");var b=a.nubbin.parents(".tlImageContainer");y(b,c)}a.nubbin.removeClass("linked hovered");a.bubble.hide()}},50)}},w=function(b,d,a){var c=d;if(b&&b.clientX){c=document.elementFromPoint(b.clientX,b.clientY)}if(c==a.nubbin.find(".nubbinHoverIcon")[0]){if(!a.nubbin.hasClass("mouseover")){a.nubbin.addClass("mouseover")}if(!d.hasClass("mouseover")){d.addClass("mouseover")}}else{if((c===d)||(c==d.find(".thinglinkImage")[0])){if(!d.hasClass("mouseover")){d.addClass("mouseover")}F(a)}else{F(a);x.hideNubbins(d)}}};E.runAfter("initcomplete",function(){if(G){z(document).unbind("vclick.tlBubbleHide").bind("vclick.tlBubbleHide",function(a){var b=a.target||a.srcElement;z(".tlImageContainer .tagx.hovered").each(function(){var c=A.getThingPieces(this);c.bubble.mouseleave();if(c.bubble.hasClass("mouseover")){c.bubble.trigger("mouseleave")}if(c.nubbin.hasClass("mouseover")){if(z("#tlTagContainer").has(a.target).length===0){c.nubbin.removeClass("mouseover");w(a,z(b).closest(".tlImageContainer"),c)}}})})}});function B(d,f){f=f||A.getThingPieces(this);var g=f.bubble.data("bubbledata");var b=f.nubbin.data("thing");if(g&&g.hoverHandler){d=g.hoverHandler}if(d){d()}L(f.nubbin);var c;if(b&&typeof(b.styles)!=="undefined"){c=b.styles}else{if(f.nubbin.data("tlStyles")){c=f.nubbin.data("tlStyles")}}var a=N.getSourceDomain(b.contentUrl);H.applyNewStyles(f.bubble,c,a);var e=(b&&typeof(b.opacity)!=="undefined")?b.opacity:1;if(e>0.01){f.bubble.show();f.bubble.css("opacity",e)}else{f.bubble.css("visibility","hidden")}if(f.nubbin.attr("href")){if(b.openlink!=="NONE"||b.theme==="rich"){f.nubbin.addClass("linked")}}f.nubbin.addClass("hovered")}function I(k,g){var c=A.getThingPieces(k),d=c.bubble.data("bubbledata"),l=c.nubbin.data("thing"),h=false;g=g||c.nubbin.closest(".tlImageContainer");var f=function(m,n){n=n||c;n.nubbin.removeClass("mouseover");w(m,g,n)};var e={};var b=function(n,m){e.hideBubblesForAllExcept(c.nubbin);if(!n){var o=null;if(d&&d.hoverHandler){o=d.hoverHandler}B(o,c);if(m){M(g,l.id)}}c.nubbin.addClass("mouseover");if(!g.hasClass("mouseover")){g.addClass("mouseover")}};var i=function(m){g.find(".tagx").not(m).each(function(){var n=A.getThingPieces(this);n.bubble.removeClass("mouseover");n.nubbin.removeClass("mouseover");F(n)})};e={mouseOverNubbin:b,attemptTagClick:J,hideBubblesForAllExcept:i};var a=false;var j=false;c.nubbin.unbind("vmouseout vmousecancel").bind("vmouseout vmousecancel",K({after:function(n,m){a=false},threshold:50}));if(c.nubbin.tlTag("isImageTag")){c.nubbin.unbind("mouseenter vclick").bind("mouseenter vclick",K({before:function(n,m){m.nubbinsVisible=g.hasClass("tlHover");m.bubbleVisible=c.nubbin.hasClass("hovered");a=a||!m.nubbinsVisible;if(!m.nubbinsVisible){m.nubbinsVisible=(c.nubbin.find(".nubbinGlow").css("display")!="none");x.showNubbins(g)}if(m.nubbinsVisible){e.mouseOverNubbin(m.bubbleVisible,true)}h=true},everyTime:function(p,m){if(p==="mouseenter"){if(G&&(!m.bubbleVisible)&&(!m.vclickInThisSequence)){j=true}}if((p==="vclick")&&(m.vclickInThisSequence)){return}if(p==="vclick"){m.vclickInThisSequence=true}var n=(typeof(l.opacity)!=="undefined")&&(l.opacity<0.01);var q=(!G||!a)&&m.nubbinsVisible&&m.bubbleVisible;if((q||n)&&!j&&(p==="vclick")){m.vclickInThisSequence=true;var o=e.attemptTagClick(c,d,l,g);if(o){c.nubbin.trigger("mouseleave")}}else{if(p=="mouseenter"){h=true}}if(m.lastOrigEventType==="touchend"){j=false}},after:function(n,m){var o=(typeof h=="function");if(!m.nubbinsVisible&&!G&&!o){e.mouseOverNubbin(m.bubbleVisible,true)}else{if(o){h()}}h=false},threshold:70}))}else{c.nubbin.unbind("mouseenter vclick").bind("mouseenter vclick",K({before:function(n,m){m.nubbinsVisible=g.hasClass("tlHover");m.bubbleVisible=c.nubbin.hasClass("hovered");a=a||!m.nubbinsVisible;e.mouseOverNubbin(m.bubbleVisible,false)},everyTime:function(n,m){if(m.bubbleVisible&&n=="vclick"){e.attemptTagClick(c,d,l,g)}},threshold:50}))}c.nubbin.unbind("mouseleave").bind("mouseleave",function(m){if(h){h=f}else{f(m)}});c.bubble.unbind("mouseenter").bind("mouseenter",function(m){c.bubble.addClass("mouseover")});c.bubble.unbind("mouseleave").bind("mouseleave",function(m){c.bubble.removeClass("mouseover");w(m,g,A.getThingPieces(c.bubble))});c.bubble.unbind("vmouseup").bind("vmouseup",K({before:function(n,m){m.tagBubbleClickHandled=false},everyTime:function(n,m){if(!m.tagBubbleClickHandled){e.attemptTagClick(c,d,l,g);m.tagBubbleClickHandled=true}},after:function(n,m){c.bubble.trigger("mouseenter");f(null)},threshold:20}));c.bubble.unbind("vclick").bind("vclick",function(m){return false});c.bubble.find(".tlHashTag").unbind("vmouseup").bind("vmouseup",function(m){window.open(this.href);return false});if(l.theme=="rich"){c.bubble.find(".tlThingFooter a").unbind("vmouseup").bind("vmouseup",function(m){window.open(this.href);return false})}c.bubble.find(".tlThingClose").bind("vmouseup",function(m){m.preventDefault();m.stopPropagation();c.bubble.removeClass("tlPlaying iframeLoaded");var o=c.bubble.find(".tlRichIframe");o.hide().remove();var n=c.bubble.find(".tlIframe");if(n.length>0){n.hide().remove();c.bubble.find(".tlSpinner").show()}c.bubble.removeClass("mouseover").hide();f(m,c);if(G&&!g.hasClass("mouseover")){g.addClass("mouseover")}return false});return{_i:e}}return{attach:I,prepareTagForDisplay:B}});tlRequire.define("tagFetcher",["jQuery","util","config"],function(g,e,h){var f=function(){var b;var r;function d(j,n){var k=[];var l="",m;if(j){for(m=0;m<j.length;m++){var i=e.cleanURIEncoding(j[m]);if((l.length+i.length+2)<n){if(l.length>0){l+="|"}l+=i}else{k.push(l);l=i}}if(l.length>0){k.push(l)}}return k}var t=[];var c;var a=[];function v(i,k,j){t=t.concat(i);if(k){a=a.concat(k)}if(c){clearTimeout(c);c=null}c=setTimeout(function(){q(t,{forceSecure:h.forceSecure,referer:h.referer,reload:j,manualViewStats:h.manualViewStats,passkeys:a});t=[];c=null},80)}function q(l,H){var m=h.getApiBaseUrl();var i=d(l,1650);var G=i.length;var n=function(w){if(b){b(w)}G=G-1;if(G===0&&r){r()}};var E;var j=g(window);var o=j.width();var D=j.height();var k=d(H.passkeys,2000);for(E=0;E<i.length;E++){var C=i[E];var F={url:C,p:E,passkeys:k[0]};if(o<700){F.vw=o}if(D<700){F.vh=D}if(window.__tlid!==undefined){F.massId=window.__tlid}if(H.forceSecure){F.forceSecure=true}if(H.referer){F.referer=H.referer}if(H.manualViewStats){F.skipStats=true}if(H.reload){F.reloadNonce=Math.floor(Math.random()*10000000)}g.ajax({url:m+"/api/tags",data:F,dataType:"jsonp",success:n})}}function p(i,k,j){var l=e.extractSceneId(i);if(l!==""&&l.charAt(0)!=="$"){i=l}if((i.length===undefined)||typeof(i)==="string"){i=[i]}else{if(i.length>1){i=i.sort()}}v(i,k,j)}function u(i){r=i}function s(i){b=i}return{fetchTags:p,dataReceivedCallback:s,finalFetchCompleteCallback:u,listify:d}};return f()});tlRequire.define("touchManager",["config","txt","sceneUtil","postMessageManager","EventDispatcher"],function(v,G,z,L,u){var E;var H;var K;var J;function N(a){var b={title:"",content:""};b.title=G("TouchDialogPreSignup.TitleDoYouLikeThisImage");b.content=G("TouchDialogPreSignup.ContentDoYouLikeThisImage",'<a href="#">',"</a>");return b}function w(b,a){var c=z.getContainerSceneId(b);if(!b){b=z.findImageContainer(c)}if(J){M(b,c,a)}else{I(b,c)}}function x(a,c,d){if(H){clearTimeout(H);H=null}if(d&&d>100){return}var b;if(!d){b=3000;d=0}else{if(d<60){b=1000}else{b=3000}$tlJQ.ajax({url:v.getApiBaseUrl()+"/api/me",cache:false,dataType:"jsonp",success:function(e){if(e.name){clearTimeout(H);H=null;if(K){K.close();K=null}A(a,c)}else{if(!K||(K&&K.closed===true)){clearTimeout(H);H=null}}}})}H=setTimeout(function(){x(a,c,d+1)},b)}function I(h,i){var e="tlTouchPreSignupPopup";var d=z.getSceneTouchCount(i);var c=N(d);var j=h.find("."+e).first();if(j.length===0){j=$tlJQ('<div class="'+e+' tlTouchPopup tlPopup"></div>');var a=$tlJQ('<div class="tlPopupInner"><h3></h3><p class="tlTouchPopupContent" style="text-align:center !important;"></p></div>');var f=$tlJQ('<a href="#" class="tlCloseBtn"></a>');f.bind("vmouseup",function(k){j.hide();return false});j.append(a);j.append(f);var g=j.find("p.tlTouchPopupContent");g.append(c.content);g.find("a").click(function(){B(h,i)});h.append(j)}h.find(".tlPopup").hide();var b=j.find("h3");b.html(c.title);setTimeout(function(){j.show()},10)}function B(c,e){var b=v.sslAddress+"/embed/touchLogin";var a=L.prepareAndGetParameters(b);var g=a.rtid;var f=a.target;var d=v.sslAddress+"/auth/connect?response_type=code&client_id="+v.clientId+"&state="+g+"/touchLogin/"+e+";"+f+"&redirect_uri="+encodeURIComponent(b);K=window.open(d,null,"width=950,height=588,scrollbars=yes");x(c,e)}function M(c,d,b){var a;if(b){a="untouch"}else{a="touch"}$tlJQ.ajax({url:v.sslAddress+"/api/scene/"+d+"/touch?method="+a,cache:false,dataType:"jsonp",success:function(e){var g;if(!e.error){var f;if(!e.results.touched&&a==="untouch"){f=-1}else{if(e.results.touched&&a==="touch"){f=1}}F.trigger("updateSceneTouchStatus",[e.results.touched,d,f]);g=z.getSceneTouchCount(d)}C(c,e,d,g)}})}function C(f,g,h,c){var d="tlTouchStatusPopup";if(c<0){c=0}var i=f.find("."+d).first();if(i.length===0){i=$tlJQ('<div class="'+d+' tlTouchPopup tlPopup"></div>');var a=$tlJQ('<div class="tlPopupInner"><h3></h3><p></p><</div>');i.append(a);f.append(i)}f.find(".tlPopup").hide();var b=i.find("h3");var e=i.find("p");if(g.error){b.text(G("TouchDialog.TitleError"))}else{if(g.results.touched){b.text(G("TouchDialog.TitleTouch"))}else{b.text(G("TouchDialog.TitleUntouch"))}if(c===1){e.text(G("TouchDialog.TouchesOne"))}else{if(c===0){e.text(G("TouchDialog.TouchesNo"))}else{e.text(G("TouchDialog.TouchesOther",c))}}}i.stop(true,true).show();if(E){clearTimeout(E);E=null}E=setTimeout(function(){i.hide(500);E=null},1300)}function A(a,b){J=true;w(a,z.isSceneTouched(b))}function D(a){J=a}var y=function(){};y.prototype=new u();y.prototype.touch=w;y.prototype.touchLoginCallback=A;y.prototype.setUserLoggedIn=D;var F=new y();return F});tlRequire.define("txt",["jQuery","config"],function(i,j){var g={poweredBy:{en:"Powered by ThingLink",fi:"Teknologiasta vastaa ThingLink",ru:" ThingLink",pt:"Desenvolvido por ThingLink",es:"Ofrecido por ThingLink",pl:"Zasilane przez ThingLink",it:"Gestito da ThingLink",ja:"ThingLink",fr:"Dvelopp par ThingLink",de:"Betrieben von ThingLink",hi:"ThingLink  ",zh:" ThingLink ",sv:"Utvecklat av ThingLink"},CopyToClipBoard:{en:"Copy to clipboard",fi:"Kopioi leikekirjaan",ru:"  ",pt:"Copiar para a rea de transferncia",es:"Copiar al portapapeles",pl:"Skopiuj do schowka",it:"Copia negli appunti",ja:"",fr:"Copier dans le presse-papiers",de:"In Zwischenablage kopieren",hi:"   ",zh:"",sv:"Kopiera till urklipp"},Copied:{en:"Copied",fi:"Kopioitu",ru:"",pt:"Copiado!",es:"Copiado!",pl:"Skopiowano!",it:"Copiato!",ja:"",fr:"Copi!",de:"Kopiert!",hi:"  ",zh:"",sv:"Kopierad"},"Share.OrJustShareThisAddress":{en:"Or just share this address:",fi:"Tai jaa tm osoite:",ru:"   :",pt:"Ou apenas partilhar este endereo:",es:"O comparte solamente esta direccin:",pl:"Lub podziel si tylko tym adresem:",it:"Oppure condividi solo questo indirizzo:",ja:"",fr:"Ou partager seulement cette adresse:",de:"Oder nur diese Adresse teilen:",hi:"      :",zh:"",sv:"Eller dela den hr adressen:"},OriginallyThinglinked:{en:"Source {0}",de:"Quelle {0}",es:"Fuente {0}",fi:"Lhde {0}",fr:"Source {0}",hi:" {0}",it:"Fonte {0}",ja:" {0}",pl:"rdo {0}",pt:"Fonte {0}",ru:" {0}",sv:"Klla {0}",zh:" {0}"},"ContextMenu.Fullscreen":{en:"Fullscreen",fi:"Esitystila",sv:"Helskrm",de:"Vollbild",es:"Pantalla total",fr:"Plein cran",hi:" ",it:"Tutto schermo",ja:"",pl:"Peny ekran",pt:"Ecr inteiro",ru:" ",zh:""},"ContextMenu.Touch":{en:"Touch image",fi:"Kosketa kuvaa",de:"Bild berhren",es:"Dar un Toque a la imagen",fr:"Touchez l'image",hi:"  ( )",it:"Tocca l'immagine",ja:"",pl:"Dotknij obraz",pt:"Toque na imagem",ru:" ",sv:"Peka p bilden",zh:""},"ContextMenu.Share":{en:"Share image...",fi:"Jaa kuva...",ru:"  ...",pt:"Partilhar Imagem...",es:"Compartir imagen...",pl:"Podziel si obrazkiem...",it:"Condividi l'Immagine...",ja:"...",fr:"Partager l'image...",de:"Share Image...",hi:"   ...",zh:"...",sv:"Dela bilden..."},"ContextMenu.Embed":{en:"Embed image...",fi:"Upota kuva...",ru:"  ...",pt:"Inserir Imagem...",es:"Insertar imagen...",pl:"Umie obrazek...",it:"Incorpora l'Immagine...",ja:"...",fr:"Image incorpore...",de:"Bild einbetten...",hi:"   ...",zh:"...",sv:"Infoga bilden..."},"Sidebar.Touch":{en:"Touch",fi:"Kosketa",de:"Berhren",es:"Tocar",fr:"Toucher",hi:" ",it:"Tocca",ja:"",pl:"Stuknij",pt:"Tocar",ru:"",sv:"Peka p",zh:""},"Sidebar.Untouch":{en:"Untouch",fi:"Poista kosketus",de:"Berhrung aufheben",es:"No tocar",fr:"D-Toucher",hi:"  ",it:"Annulla Tocca",ja:"",pl:"Odhacz stuknicie",pt:"Intacto",ru:" ",sv:"Peka av",zh:""},"Sidebar.Share":{en:"Share",fi:"Jaa",ru:"",pt:"Partilhar",es:"Compartir",pl:"Udostpnij",it:"Condividi",ja:"",fr:"Partager",de:"Teilen",hi:" ",zh:"",sv:"Dela"},"Sidebar.Edit":{en:"Edit",fi:"Muokkaa",ru:"",pt:"Editar",es:"Editar",pl:"Edytuj",it:"Modifica",ja:"",fr:"diter",de:"Bearbeiten",hi:" ",zh:"",sv:"Redigera"},"Sidebar.Delete":{en:"Delete",fi:"Poista",ru:"",es:"Borrar",pt:"Excluir",pl:"Usu",it:"Elimina",ja:"",fr:"Effacer",de:"Lschen",se:"Ta bort",hi:"",zh:""},"Sidebar.Remix":{en:"Remix",fi:"Remiksaa",ru:"",es:"Remezclar",pt:"Recombinar",pl:"Remiksuj",it:"Remixa",ja:"",fr:"Remixer",se:"Blanda igen",hi:" ",zh:""},"Sidebar.Report":{en:"Report",fi:"Raportoi",ru:"",es:"Informe",pt:"Relatar",pl:"Zgo",it:"Riporta",ja:"",fr:"Rapporter",de:"Remixen",se:"Rapportera",hi:" ",zh:""},"Sidebar.Create":{en:"Create",fi:"Tee uusi",ru:"",es:"Crear",pt:"Criar",pl:"Utwrz",it:"Crea",ja:"",fr:"Crer",de:"Melden",se:"Skapa",hi:" ",zh:""},"Sidebar.Comment":{en:"Comment",fi:"Kommentoi",ru:"",es:"Cometar",pt:"Comentar",pl:"Komentuj",it:"Commenta",ja:"",fr:"Commenter",de:"Kommentieren",se:"Kommentera",hi:" ",zh:""},"Sidebar.Fullscreen":{en:"Fullscreen",fi:"Esitystila",sv:"Helskrm",de:"Vollbild",es:"Pantalla total",fr:"Plein cran",hi:" ",it:"Tutto schermo",ja:"",pl:"Peny ekran",pt:"Ecr inteiro",ru:" ",zh:""},"Sidebar.Like":{en:"Like",fi:"Tykk",ru:"",es:"Me gusta",pt:"Gostar",pl:"Polub",it:"Mi piace",ja:"",fr:"Aimer",de:"Liken",se:"Gilla",hi:" ",zh:""},"Sidebar.Stats":{en:"Stats",fi:"Tilastot",ru:"",es:"Estadsticas",pt:"Estatsticas",pl:"Statystyki",it:"Statistiche",ja:"",fr:"Stats",de:"Statistiken",se:"Statistik",hi:" ",zh:""},"Sidebar.Post":{en:"Post",fi:"Julkaise",ru:"",sv:"Publicera",es:"Publicar",pt:"Publicar",pl:"Przelij",ja:"",de:"Posten",hi:" ",it:"Pubblica",fr:"Diffuser",zh:""},"TouchDialogPreSignup.ContentOriginal":{en:"To touch {0}Sign in!{1} Touching marks the image as a favorite and shares it with those who follow you.",fi:"{0}Kirjaudu sisn{1} koskettaaksesi! Kun kosketat kuvaa, se tallentuu itsellesi ja nkyy niille, jotka seuraavat sinua.",ru:"{0}{1},  !          ,    .",es:"Para tocar {0}Inscrbete!{1} Al tocarla se marca la imagen como favorita y se comparte con aquellos que te siguen.",pt:"Para tocar {0}Inicie sesso!{1} Tocar assinala a imagem como favorita e partilha-a com aqueles que o seguem.",pl:"Aby stukn, {0}zaloguj si!{1} Stuknicie zaznacza obraz jako ulubiony i udostpnia go tym, ktrzy Ci obserwuj.",it:"Per toccare, {0}Accedi!{1} L'immagine toccata verr aggiunta ai preferiti e verr condivisa con le persone che ti seguono.",ja:"{0}{1} ",fr:"Pour toucher {0}inscrivez-vous!{1} Le fait de toucher classe l'image dans les favoris et vous la partagez avec ceux qui vous suivent.",de:"Zum Berhren {0}anmelden!{1} Durch Berhrung wird das Bild als Favorit markiert und mit allen, die dir folgen, geteilt.",se:"Peka p {0}Registrera dig!{1} Detta markerar bilden som favorit och delar den med de som fljer dig.",hi:"    {0} !{1}                       ",zh:"{0}{1}"},"TouchDialog.TitleError":{en:"Error touching",fi:"Kosketus ei onnistunut"},"TouchDialog.TitleTouch":{en:"Touched image",fi:"Kosketettu",de:"Berhrtes Bild",es:"Imagen con Toques",fr:"Image touche",hi:"  ",it:"immagine toccata",ja:"",pl:"Dotknity obraz",pt:"Imagem tocada",ru:" ",sv:"Pekat p bilden",zh:""},"TouchDialog.TitleUntouch":{en:"Untouched image",fi:"Kosketus poistettu",de:"Unberhrtes Bild",es:"Imagen sin Toques",fr:"Image d-touche",hi:" ",it:"immagine con tolto il tocco",ja:"",pl:"Dotknicie cofnite",pt:"Imagem intocada",ru:" ",sv:"Pekat av bilden",zh:""},"TouchDialog.TouchesOne":{en:"One touch on the image",fi:"Yksi kosketus",de:"1 Berhrung des Bildes",es:"1 Toque en la imagen",fr:"1 Touche sur cette image",hi:"  1    ",it:"1 Tocco sull'immagine",ja:"1",pl:"1 dotyk na obrazie",pt:"1 Toque na imagem",ru:"1  ",sv:"1 pekning p bilden",zh:"1"},"TouchDialog.TouchesNo":{en:"No touches on the image",fi:"Ei kosketuksia",de:"Kein es gefllt mir auf dem Bild.",es:"La imagen no tiene Toques",fr:"Pas de Touche sur cette image",hi:"    ",it:"Nessun Tocco sull'immagine",ja:"",pl:"Brak dotykw na obrazie",pt:"Sem toques na imagem",ru:"  ",sv:"Bilden har inte pekats p",zh:""},"TouchDialog.TouchesOther":{en:"{0} touches on the image",fi:"{0} kosketusta",de:"{0} Berhrungen des Bildes",es:"{0} Toques en la imagen",fr:"{0} Touches sur cette image",hi:"  {0}    ",it:"{0} Tocchi sull'immagine",ja:"{0}",pl:"{0} dotykw na obrazie",pt:"{0} Toques na imagem",ru:"{0}  () ",sv:"{0} pekningar p bilden",zh:"{0}"},"TouchSidebarButton.TouchesOne":{en:"One touch on the image",fi:"Yksi kosketus",de:"1 Berhrung des Bildes",es:"1 Toque en la imagen",fr:"1 Touche sur cette image",hi:"  1    ",it:"1 Tocco sull'immagine",ja:"1",pl:"1 dotyk na obrazie",pt:"1 Toque na imagem",ru:"1  ",sv:"1 pekning p bilden",zh:"1"},"TouchSidebarButton.TouchesNo":{en:"Collect images you like!",fi:"Ker kuvia, joista pidt!",de:"Sammle Bilder, die Dir gefallen!",es:"Colecciona las imgenes que te gusten!",fr:"Collectionez les images que vous aimez",hi:"    !",it:"Raccogli le immagini che ti piacciono!",ja:"",pl:"Zbieraj obrazy, ktre lubisz!",pt:"Recolha imagens de que gosta!",ru:" ,   !",sv:"Samla bilder du gillar!",zh:""},"TouchSidebarButton.TouchesOther":{en:"{0} touches on the image",fi:"{0} kosketusta",de:"{0} Berhrungen des Bildes",es:"{0} Toques en la imagen",fr:"{0} Touches sur cette image",hi:"  {0}    ",it:"{0} Tocchi sull'immagine",ja:"{0}",pl:"{0} dotykw na obrazie",pt:"{0} Toques na imagem",ru:"{0}  () ",sv:"{0} pekningar p bilden",zh:"{0}"},"TouchDialogPreSignup.TitleDoYouLikeThisImage":{en:"Do you like this image? <p style='font-weight: bold !important; display: inline;'>TOUCH it!</p>",fi:"Pidtk tst kuvasta? <p style='font-weight: bold !important; display: inline;'>KOSKETA sit!</p>",de:"Mgen Sie dieses Bild? <p style='font-weight: bold !important; display: inline;'>Bild berhren</p>",es:"Te gusta esta imagen? <p style='font-weight: bold !important; display: inline;'>Dar un Toque a la imagen</p>",fr:"Aimez vous cette image? <p style='font-weight: bold !important; display: inline;'>Touchez l'image</p>",hi:"     ? <p style='font-weight: bold !important; display: inline;'>  ( )</p>",it:"Ti piace questa immagine? <p style='font-weight: bold !important; display: inline;'>Tocca l'immagine</p>",ja:" <p style='font-weight: bold !important; display: inline;'></p>",pl:"Lubisz ten obraz? <p style='font-weight: bold !important; display: inline;'>Dotknij obraz</p>",pt:"Gosta desta imagem? <p style='font-weight: bold !important; display: inline;'>Toque na imagem</p>",ru:"   ? <p style='font-weight: bold !important; display: inline;'> </p>",sv:"Gillar du denna bild? <p style='font-weight: bold !important; display: inline;'>Peka p bilden</p>",zh:" <p style='font-weight: bold !important; display: inline;'></p>"},"TouchDialogPreSignup.ContentDoYouLikeThisImage":{en:"{0}Sign in{1}to ThingLink to create your own interactive images!",fi:"{0}Kirjaudu sisn{1}Thinglink-palveluun ja tee omia interaktiivisia kuvia!",de:"Bei ThingLink {0}anmelden{1}, um eigene interaktive Bilder zu erstellen!",es:"- {0}Regstrate{1} en ThingLink para crear tus propias imgenes interactivas!",fr:"{0}Enregistrez vous{1}  ThingLink pour crer vos propres images intractives",hi:"        ThingLink   {0}   {1}  !",it:"{0}Accedi{1} a ThingLink per creare le tue immagini interattive!",ja:"ThingLink {0}{1}",pl:"{0}Zaloguj si{1} do ThingLink, aby tworzy wasne interaktywne obrazy!",pt:"{0}Inscreva{1}se- no ThingLink para criar as suas prprias imagens interativas!",ru:"{0} {1} ThingLink,     !",sv:"{0}Logga in{1} till ThingLink fr att skapa dina egna interaktiva bilder!",zh:"{0}{1} ThingLink"},"FourDotsButton.MadeWithOrMakeYourOwn":{en:"Made with",fi:"Tee oma",ru:"  ",pt:"Feito com o",es:"Hecho con",pl:"Zrb to sam",it:"Creato con",ja:"",fr:"Ralis avec",de:"Hergestellt mit",hi:"  ",zh:"",sv:"Skapat med"},"FourDotsButton.SignUpShort":{en:"Sign up!",fi:"Rekisteridy!",ru:"!",pt:"Inscrever-se!",es:"Regstrate!",pl:"Zarejestruj si!",it:"Registrati!",ja:"",fr:"S'inscrire!",de:"Melde dich an!",hi:"  !",zh:"",sv:"Registrera dig!"},"FourDotsButton.SignUpLong":{en:"Sign up, it's free!",fi:"Rekisteridy, se on ilmaista!",ru:",  !",pt:"Inscreva-se,  grtis!",es:"Regstrate, es gratis!",pl:"Zarejestruj si, jest to darmowe!",it:"Registrati,  gratis!",ja:"",fr:"Inscrivez-vous, c'est gratuit!",de:"Melde dich an, es ist kostenlos!",hi:"  ,   !",zh:"",sv:"Registrera dig, det r gratis!"},"FourDotsButton.LearnMore":{en:"Learn more",fi:"Lue lis",ru:" ",pt:"Saber mais",es:"Descubra ms",pl:"Dowiedz si wicej",it:"Per saperne di pi",ja:"",fr:"En savoir plus",de:"Mehr erfahren",hi:" ",zh:"",sv:"Lr mer"}};var h="en";function f(c){var a=1,d;var b=g[c][j.language||h];if(!b){b=g[c]["en"];if(!b){return""+c+""}}for(d=a;d<arguments.length;d++){b=b.replace("{"+(d-a)+"}",arguments[d])}return b}return f});tlRequire.define("util",[],function(){function p(c){var a=c.indexOf("://");if(a===-1){if(c.substring(0,2)==="//"){a=2}else{a=0}}else{a=a+3}var b=c.indexOf("/",a);if(b===-1){b=c.indexOf("?",a);if(b===-1){b=c.length}}c=c.substring(a,b);b=c.indexOf(":");if(b!=-1){c=c.substring(0,b)}return c}function x(){return("https:"==document.location.protocol)?"https:":"http:"}function v(a){if(!a){return""}var c=a.indexOf("/",8);var b=a.indexOf("?",8);var d=c<0?b:b<0?c:Math.min(c,b);if(d>0){return a.substring(0,d)}return a}function o(b){var c;try{c=decodeURIComponent(b)}catch(a){c=null}return c?encodeURI(c):encodeURI(b)}function z(a){return a.replace(/;\$?\d+$/,"")}function w(b){b=String(b);var c=b.lastIndexOf(";");if(c>0&&c<b.length-1){var a=b.slice(c+1);return a}if(/^\d+$/.test(b)){return b}return""}function A(b,c,d){var e="";var g=c?"!important":"";var f,a;for(f in b){if(b.hasOwnProperty(f)){a=b[f];if(d&&!isNaN(a)&&parseInt(a,10)!==0){a=a+"px"}e+=(f+":"+a+g+";")}}return e}function u(){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var a=parseFloat(RegExp.$1);if(a<=8){return true}}return false}function y(a){return(a===undefined)}function q(){var b=0;var a=0;if(!window.innerWidth){if(document.documentElement.clientWidth!==0){b=document.documentElement.clientWidth;a=document.documentElement.clientHeight}else{b=document.body.clientWidth;a=document.body.clientHeight}}else{b=window.innerWidth;a=window.innerHeight}return{w:b,h:a}}function t(a){var h=a.getBoundingClientRect();var g=document.body;var c=document.documentElement;var d=window.pageYOffset||c.scrollTop||g.scrollTop;var j=window.pageXOffset||c.scrollLeft||g.scrollLeft;var i=c.clientTop||g.clientTop||0;var f=c.clientLeft||g.clientLeft||0;var e=h.top+d-i;var b=h.left+j-f;return{top:Math.round(e),left:Math.round(b)}}var r=(function(){return document.documentElement&&typeof(document.documentElement.ontouchstart)!="undefined"}());function s(a){return a.parents("div[tl-channel-id]").attr("tl-channel-id")}function B(b,c){var a;for(a in c){if(c.hasOwnProperty(a)){b[a]=c[a]}}return b}return{cleanURIEncoding:o,extractUrl:z,extractSceneId:w,mapToCssText:A,browserIsUnsupported:u,no:y,getWindowSize:q,getOffsetRect:t,getDomain:p,getProtocol:x,getSourceDomain:v,isTouchDevice:r,getChannelId:s,extend:B}});