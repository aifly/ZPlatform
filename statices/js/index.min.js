"use strict";var _createClass=function(){function a(e,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||false;d.configurable=true;if("value" in d){d.writable=true}Object.defineProperty(e,d.key,d)}}return function(d,b,c){if(b){a(d.prototype,b)}if(c){a(d,c)}return d}}();function _possibleConstructorReturn(a,b){if(!a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b&&(typeof b==="object"||typeof b==="function")?b:a}function _inherits(b,a){if(typeof a!=="function"&&a!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:false,writable:true,configurable:true}});if(a){Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a}}function _toConsumableArray(a){if(Array.isArray(a)){for(var c=0,b=Array(a.length);c<a.length;c++){b[c]=a[c]}return b}else{return Array.from(a)}}function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}window.addEventListener("load",function(){var k=document;var f={viewWidth:k.documentElement.clientWidth,viewHeight:k.documentElement.clientHeight,loadingImgArr:[],main:$("#fly-main"),header:$(".fly-header"),canvas:$("#fly-stage")[0],userCanvas:$("#canvas")[0],pwdCanvas:$("#canvas-pwd")[0],username:$("input[name='username']"),password:$('input[type="password"]'),login:$("#login"),loginMask:$("#fly-main .fly-login-mask"),loginBtn:$(".btn-login"),regBtn:$(".btn-reg"),btnOK:$("#fly-main .login-btn span"),rayen:$(".button--rayen"),goToReg:$("#fly-main .go-to-reg"),goToLogin:$("#fly-main .go-to-login"),regBox:$("#fly-main .fly-reg-box"),loginBox:$("#fly-main .fly-login-box"),animationEnd:"onwebkitanimationend" in window?"webkitAnimationEnd":"animationend",transitionEnd:"onwebkittransitionend" in window?"webkitTransitionEnd":"transitionend"};var l={init:function n(){var y=this;y.setDefault();window.addEventListener("resize",function(){y.setDefault(k.documentElement.clientWidth);var ap=y.setSize(k.documentElement.clientHeight)});var w=y.setSize();var E=600;var aj=600;var ag=100;var p=50;var D="#e4dbdc";var L=4;var x=document.getElementById("fly-stage"),C=new createjs.Stage(x),U=new createjs.Container().set({x:(w.width-E)/2,y:(w.height-aj)/2});C.enableMouseOver(10);C.mouseMoveOutside=true;var Z=new createjs.Shape();Z.graphics.beginFill(D).setStrokeStyle(5).beginStroke("#fff").drawRoundRect(0,0,E,ag,p).endFill();var am=new createjs.Shape().set({x:Z.x-L/2,y:Z.y-L/2});am.dashCmd=am.graphics.setStrokeDash([14,10]).command;am.graphics.setStrokeStyle(3).beginStroke("#aaaaaa").drawRoundRect(0,0,E+L,ag+L,p).endFill();var Y=new createjs.Shape().set({x:E,y:0});Y.graphics.beginFill(D).setStrokeStyle(5).beginStroke("#fff").drawRoundRect(0,0,aj*1.2,ag,p).endFill();Y.regX=E+140;Y.regY=50;Y.rotation=-45;var ac=new createjs.Shape().set({x:Y.x-L/2,y:Y.y-L/2});ac.dashCmd=ac.graphics.setStrokeDash([14,10]).command;ac.graphics.setStrokeStyle(3).beginStroke("#aaaaaa").drawRoundRect(0,0,aj*1.2,ag+L,p).endFill();ac.regX=Y.regX;ac.regY=Y.regY;ac.rotation=-45;var W=new createjs.Shape().set({x:ag/1.6,y:aj-ag*1.62});W.graphics.beginFill(D).setStrokeStyle(5).beginStroke("#fff").drawRoundRect(0,0,E,ag,p).endFill();var X=new createjs.Shape().set({x:W.x-L/2,y:W.y-L/2});X.dashCmd=X.graphics.setStrokeDash([14,10]).command;X.graphics.setStrokeStyle(3).beginStroke("#aaaaaa").drawRoundRect(0,0,E+L,ag+L,p).endFill();var V=new createjs.Shape().set({y:2});V.graphics.beginFill(D).moveTo(E-85,0).lineTo(E-175,ag-6).lineTo(E-32,ag-6).lineTo(E,ag/2).lineTo(E-40,0).endFill();var S=new createjs.Shape().set({y:2});S.graphics.beginFill(D).moveTo(120,W.y).lineTo(236,W.y-1).lineTo(140,W.y+ag-6).lineTo(120,W.y+ag-6).endFill();var R=new createjs.Shape().set({y:0});R.graphics.beginFill("#fff").drawRect(E-80,-1,20,3);var Q=new createjs.Shape().set({y:2});Q.graphics.beginFill("#fff").drawRoundRect(E-185,ag-6,20,3,1);var P=new createjs.Shape().set({y:2});P.graphics.beginFill("#fff").drawRoundRect(230,W.y-5,6,6,3);var M=new createjs.Shape().set({y:2});M.graphics.beginFill("#fff").drawRoundRect(120,W.y+ag-6,20,4,0);var G=new createjs.Shape();G.graphics.beginStroke("#bdb8b8").moveTo(E-73,3).lineTo(E-162,ag-6);var F=new createjs.Shape();F.graphics.beginStroke("#bdb8b8").moveTo(228,W.y+3).lineTo(136,W.y+ag-6);var af=new createjs.Shape().set({x:0,y:35});af.graphics.beginLinearGradientFill(["rgba(255,152,0,1)","rgba(200,191,107,.1)"],[0,1],0,0,0,200).drawRoundRect(0,0,E-ag,ag*1.1,45);var ae=new createjs.Shape().set({x:E+92,y:-50});ae.graphics.beginLinearGradientFill(["rgba(171,157,187,1)","rgba(156,169,194,.3)"],[0,1],0,0,0,740).drawRoundRect(0,0,E,ag*1.1,70);ae.regX=Y.regX;ae.regY=Y.regY;ae.rotation=-45;var ad=new createjs.Shape().set({x:W.x,y:aj-ag-50});ad.graphics.beginLinearGradientFill(["rgba(255,139,0,1)","rgba(255,139,0,.1)"],[0,1],0,0,0,170).drawRoundRect(0,0,E,ag*1.4,45);var B=new createjs.Bitmap("./static/images/c-center.png").set({x:180,y:120});B.scaleX=0.8;B.scaleY=0.8;this.cloudImg=B;var r=new createjs.Bitmap("./static/images/pc.png").set({scaleX:0.7,scaleY:0.7,y:W.y+15,x:E/5});var H=new createjs.Bitmap("./static/images/mobile.png").set({scaleX:1,scaleY:1,y:W.y+20,x:E/2});var I=new createjs.Bitmap("./static/images/pad.png").set({scaleX:0.7,scaleY:0.7,y:W.y+20,x:E/1.5});var z=[af,ae,ad,Z,am,W,X,Y,ac,V,S,R,Q,P,M,G,F,B,r,H,I],an=[],K=[],A=[],aa=["a","v","i","t","v1","z-ai","z-e","z-i","z-m","z-ps","z-t"];aa=aa.map(function(ap){return"./static/images/"+ap+".png"});z.forEach(function(ap){U.addChild(ap)});var u=function(){function aq(){var av=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,aq);var au=this;au.draw()}_createClass(aq,[{key:"draw",value:function ap(){var ax=new createjs.Container();var aw=new createjs.Shape();aw.graphics.setStrokeStyle(1).beginStroke("#f90").moveTo(E/2+20,aj/2-20).lineTo(E/3.5,r.y).endFill();var av=new createjs.Shape();av.graphics.setStrokeStyle(1).beginStroke("#f90").moveTo(E/2+20,aj/2-20).lineTo(E/1.9,H.y).endFill();var au=new createjs.Shape();au.graphics.setStrokeStyle(1).beginStroke("#f90").moveTo(E/2+20,aj/2-20).lineTo(E/1.4,I.y).endFill();ax.addChild(aw,av,au);this.container=ax;this.container.visible=false;U.addChild(ax)}},{key:"show",value:function ar(){this.container.visible=true}},{key:"hide",value:function at(){this.container.visible=false}}]);return aq}();y.cueLine=new u();var s=function(){function at(au){_classCallCheck(this,at);var av=[].concat(_toConsumableArray(au));this.sx=av[0];this.sy=av[1];this.height=av[2];this.hitX=av[3];this.hitY=av[4];this.regX=av[5];this.regY=av[6];this.color=av[7];this.index=av[8];this.rotation=av[9];this.draw()}_createClass(at,[{key:"draw",value:function ap(){var au=new createjs.Shape();this.shape=au;au.graphics.beginStroke(this.color||"#bab4b4").setStrokeStyle(1).moveTo(this.sx,this.sy).lineTo(this.sx,this.sy+this.height).endStroke();var av=[this.regX,this.regY,this.rotation||0];au.regX=av[0];au.regY=av[1];au.rotation=av[2];U.addChildAt(au,this.index||8)}},{key:"roll",value:function aq(){if(!this.shape){return}this.shape.x=this.shape.x+1;this.die()}},{key:"die",value:function ar(){if(this.shape.x>=this.hitX){U.removeChild(this.shape);an.shift();this.shape=null}}}]);return at}();var v=function(au){_inherits(at,au);function at(av){var aw=arguments.length<=1||arguments[1]===undefined?1:arguments[1];_classCallCheck(this,at);var ay=_possibleConstructorReturn(this,Object.getPrototypeOf(at).call(this,av));var ax=[].concat(_toConsumableArray(av));ay.rotation=ax[0];ay.name=y.getGuid();ay.step=aw;return ay}_createClass(at,[{key:"roll",value:function ap(){if(!this.shape){return}this.shape.x=this.shape.x-this.step;this.shape.y=this.shape.y+this.step;this.die()}},{key:"delLine",value:function aq(){var av=this;an.forEach(function(aw,ax){aw.name===av.name&&an.splice(ax,1)})}},{key:"die",value:function ar(){if(this.shape.y>=this.hitY){U.removeChild(this.shape);this.delLine();this.shape=null}}}]);return at}(s);var ah=function(){function aq(au){_classCallCheck(this,aq);var at=this;at.src=au.img;at.x=au.x;at.y=au.y;at.scale=au.scale;at.w=0;at.h=0;var av=new Image();av.onload=function(){at.w=this.width*(at.scale||1);at.h=this.height*(at.scale||1)};av.src=at.src;this.image=av;at.container=au.container||U;at.draw()}_createClass(aq,[{key:"draw",value:function ap(){}},{key:"roll",value:function ar(){}}]);return aq}();var ab=function(aq){_inherits(at,aq);function at(){var au=arguments.length<=0||arguments[0]===undefined?{x:0,y:0,scale:1}:arguments[0];_classCallCheck(this,at);return _possibleConstructorReturn(this,Object.getPrototypeOf(at).call(this,au))}_createClass(at,[{key:"draw",value:function ap(){var au=new createjs.Bitmap(this.src).set({x:this.x,y:this.y,scale:1});this.img=au;U.addChildAt(au,U.getChildIndex(B)-1)}},{key:"roll",value:function ar(){if(!this.img){return}U.setChildIndex(this.img,U.getChildIndex(B)-1);if(this.img.x<=E-10-this.w&&!this.back){this.img.x+=0.5}else{this.back=true;this.img.x-=0.4;this.img.y+=0.4;if(this.img.y>160){U.removeChild(this.img);y.produce();this.img=null;this.image=null}}}}]);return at}(ah);var T=function(aw){_inherits(at,aw);function at(az){_classCallCheck(this,at);var ax=_possibleConstructorReturn(this,Object.getPrototypeOf(at).call(this,az));var ay=ax;var aA=[y.r(120,180),y.r(-0.6,0.6),y.r(-0.6,0.6),true,0,false,y.getGuid(),0];ay.life=aA[0];ay.speedX=aA[1];ay.speedY=aA[2];ay.start=aA[3];ay.iNow=aA[4];ay.canMove=aA[5];ay.name=aA[6];ay.angle=aA[7];ay.left=ay.x<=U.x;return ax}_createClass(at,[{key:"starting",value:function aq(){this.start=true}},{key:"stop",value:function au(){this.start=false}},{key:"draw",value:function ap(){var ay=this;var ax=new createjs.Bitmap(this.src).set({x:this.x,y:this.y,scaleX:this.scale,scaleY:this.scale});ax.cursor="pointer";this.img=ax;ax.on("mousedown",function(az){ay.stop();ay.canMove=true});ax.on("pressmove",function(aA){if(ay.canMove){if(!ay.one&&ax.x+ay.w>U.x&&ax.x<U.x+ag&&ax.y+ay.h>U.y-20&&ax.y<U.y+ag){}var az=aA.stageX-ay.w/2,aB=aA.stageY-ay.h/2;az<0&&(az=0);aB<=0&&(aB=0);az>f.viewWidth-ay.w/2&&(az=f.viewWidth-ay.w);aB>f.viewHeight-ay.h/2&&(aB=f.viewHeight-ay.h);ay.img.x=az;ay.img.y=aB}});ax.on("rollover",function(az){ay.stop();ax.scaleX+=0.2;ax.scaleY+=0.2});ax.on("rollout",function(az){ax.scaleX-=0.2;ax.scaleY-=0.2;ay.starting();if(!ay.canMove){return}if(ax.x+ay.w>U.x&&ax.x<U.x+ag&&ax.y+ay.h>U.y-20&&ax.y<U.y+ag){K.push(new ab({img:ay.src,x:0,y:(ag-10-ay.h)/2,scale:1}));if(!ay.left){ao=E+E;J=f.viewWidth-100}else{ao=0;J=U.x}A.push(new at({img:ay.src,x:y.r(ao,J),y:y.r(0,O),scale:0.8}));ay.stop();ay.die(ax)}else{ay.canMove=false;ay.one=false}});C.addChild(ax)}},{key:"die",value:function av(ax){A.forEach(function(ay,az){ay.name=ax.name&&A.splice(az,1)});C.removeChild(ax);this.img=null}},{key:"roll",value:function ar(){var ax=this;if(!ax.img){return}if(ax.start){ax.img.x+=ax.speedX;ax.img.y+=ax.speedY;ax.img.x<=0&&(ax.speedX*=-1);ax.img.y<=0&&(ax.speedY*=-1);ax.img.y>=f.viewHeight-100&&(ax.speedY*=-1);ax.img.x>f.viewWidth-100&&(ax.speedX*=-1);ax.iNow++;if(ax.iNow>=ax.life){ax.life=y.r(ax.life,ax.life+150);ax.iNow=0;y.r(-1,1)>0&&(ax.speedX*=-1);y.r(-1,1)>0&&(ax.speedY*=-1)}}}}]);return at}(ah);C.addChild(U);var ao=0,J=U.x,O=f.viewHeight-100;for(var al=0;al<aa.length;al++){if(al%2===1){ao=E+E;J=f.viewWidth-100}else{ao=0;J=U.x}A.push(new T({img:aa[al],x:y.r(ao,J),y:y.r(0,O),scale:0.8}))}for(var ak=10;ak>=0;ak--){an.push(new s([p*(ak+1),4,ag-8,E-85-p*(ak+1)]));an.push(new s([p*(ak+1)+20,W.y+5,ag-8,E-58-p*(ak+1)+20,4,"","","",U.getChildIndex(Y)-1]))}for(var ai=0;ai<16;ai++){an.push(new v([363-13*ai*4,374+12*ai/25,ag-4,0,W.y-34*ai,"","","",U.getChildIndex(B)-1,-45]))}createjs.Ticker.timingMode=createjs.Ticker.RAF;createjs.Ticker.on("tick",q,this);var N=0,t=0;function q(ap){am.dashCmd.offset+=1;ac.dashCmd.offset+=1.47;X.dashCmd.offset+=1;K.forEach(function(aq){return aq.roll()});A.forEach(function(aq){return aq.roll()});an.forEach(function(aq){return aq.roll()});N++;if(N%50===0){N=0;an.push(new s([p,4,ag-8,E-85,4]));an.push(new s([p+20,W.y+5,ag-8,E-65,4,"","","",U.getChildIndex(Y)-1]))}t++;if(t%35===0){if(t===35){this.line=this.line||new v([363,376,ag-4,0,W.y,"","","",U.getChildIndex(B)-1,-45],1.03);an.push(this.line)}else{t=70;an.push(new v([363,376,ag-4,0,W.y,"","",null,U.getChildIndex(B)-1,-45]))}}C.update(ap)}y.domInit()},domInit:function b(){var p=this;f.goToReg.on("click",function(){f.loginBox.addClass("hide");f.regBox.addClass("show")});f.goToLogin.on("click",function(){f.loginBox.removeClass("hide");f.regBox.removeClass("show")});f.btnOK.on("mousedown",function(q){$(q.target).addClass("shadow")}).on("mouseup",function(q){$(q.target).removeClass("shadow").addClass("hide").parent().find(".loading").addClass("show")});f.loginBtn.on("click",function(){f.loginMask.addClass("show");f.loginBtn[0].btn=f.loginBtn[0].btn||1;f.goToLogin.trigger("click");if(f.loginBtn[0].btn===1){f.loginBtn[0].btn=2;p.loginAction()}});f.regBtn.on("click",function(){f.loginMask.addClass("show");f.regBtn[0].btn=f.regBtn[0].btn||1;f.goToReg.trigger("click");if(f.regBtn[0].btn===1){f.regBtn[0].btn=2;p.loginAction()}});$(".reg-input").on("focus",function(q){$(q.target).val().length<=0&&$(q.target).siblings(".mark").addClass("blur")}).on("blur",function(q){$(q.target).val().length<=0&&$(q.target).siblings(".mark").removeClass("blur")});$(".close").on("click",function(){f.loginMask.removeClass("show")});$(document).on("keydown",function(q){q.keyCode===27&&f.loginMask.removeClass("show")})},comDanger:function o(s,q){var p=this;s.show=s.show||123;if(s.show===123){var r;(function(){s.show=1;s.sourceRect=new createjs.Rectangle(0,0,125,192);s=s.clone();var u=[new createjs.BlurFilter(16,16,2)];var t=p.getFXBitmap(s,u,0,0,125,192);r=createjs.Tween.get(t,{loop:true}).to({alpha:1},2500).wait(1000).to({alpha:0},2500);r.on("change",function(){s.alpha=1-Math.pow(t.alpha,3)});q.addChild(s,t)})()}},getFXBitmap:function m(t,s,p,v,q,r){t.cache(p,v,q,r);var u=new createjs.Bitmap(t.cacheCanvas);u.filters=s;u.cache(0,0,q,r);u.regX=-p;u.regY=-v;u.x=t.x;u.y=t.y;u.alpha=0;t.uncache();return u},produce:function h(){var p=this;p.cueLine.show();createjs.MotionGuidePlugin.install(createjs.Tween);createjs.Tween.get(this.cloudImg,{loop:false},false).to({rotation:14},400).to({rotation:0},400).to({rotation:-7},200).to({rotation:0},200).call(function(q){return p.cueLine.hide()})},r:function a(q,p){return q+(p-q)*Math.random()},loginAction:function d(){var p=this;var r=f.login.find("*");var q=$(".input-box .placeholder");f.username.on("focus",function(){if(f.username.val().length<=0){q.eq(0).css("transform","scale(.8) translate(-10px,-30px)");p.sinLine({canvas:f.userCanvas,input:f.username})}}).on("blur",function(){if(f.username.val().length<=0){q.eq(0).css("transform","scale(1) translate(0,0)");p.sinLine({canvas:f.userCanvas,input:f.username,isBack:true})}});f.password.on("focus",function(){if(f.password.val().length<=0){q.eq(1).css("transform","scale(.8) translate(-10px,-30px)");p.sinLine({canvas:f.pwdCanvas,input:f.password})}r.each(function(s,t){$(t).addClass("password")})}).on("blur",function(){r.each(function(s,t){$(t).removeClass("password")});if(f.password.val().length<=0){q.eq(1).css("transform","scale(1) translate(0,0)");p.sinLine({canvas:f.pwdCanvas,input:f.password,isBack:true})}})},getGuid:function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var q=Math.random()*16|0,p=s=="x"?q:q&3|8;return p.toString(16)})},sinLine:function e(){var y=arguments.length<=0||arguments[0]===undefined?{isBack:false}:arguments[0];var s=y.canvas,D=y.isBack,z=y.input;s.width=$(s).parent().width();var r=s.getContext("2d"),q=s.width,B=s.height,u=Math,v=50,x=0,A=B*0.6,p=u.ceil(q/u.PI*4),w=D?-10:10;z.css("borderBottom","none");var C=setInterval(function(){x+=w;r.clearRect(0,0,q,B);r.beginPath();for(var t=0;t<p;t++){r.lineTo(u.PI*t/180*v,0.3*u.sin(u.PI*(t-x)/180)*v/2+A)}r.stroke();if(u.abs(x)>q){r.clearRect(0,0,s.width,s.height);r.beginPath();r.moveTo(0,A);r.lineTo(q,A);r.stroke();clearInterval(C)}},18)},setSize:function g(){var p=arguments.length<=0||arguments[0]===undefined?f.viewHeight:arguments[0];var q=arguments.length<=1||arguments[1]===undefined?f.viewWidth:arguments[1];f.main.height(p-f.header.height());f.canvas.width=q;f.canvas.height=p-f.header.height();f.login.css({top:$(".fly-login-box").offset().top-f.login.height()-$(".fly-header").height()+10});f.rayen.css({marginTop:(f.header.height()-30)/2});return{width:q,height:p}},setDefault:function j(){var p=arguments.length<=0||arguments[0]===undefined?f.viewWidth:arguments[0];k.getElementsByTagName("html")[0].style.fontSize=p/10+"px"},addShadow:function c(p){p.addClass("shadow");setTimeout(function(){p.removeClass("shadow")},200)}};l.init()});